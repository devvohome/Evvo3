<section class="Section Section--spacingNone" id="section-{{ section.id }}" data-section-type="image-with-icons" data-section-id="{{ section.id }}">
{% for block in section.blocks %}
  {% if product.handle == block.settings.product %}
  {% assign image = block.settings.banner %}
  {% assign title = block.settings.maintitle %}
  {%- capture mobile_size -%}750x{% if image.height >= 960 %}960{% else %}{{ image.height }}{% endif %}{%- endcapture -%}
  <div class="FlexboxIeFix">
    <div class="ImageHero ImageHero--large" {% if image %}style="background: url({{ image | img_url: '1x1', format: 'pjpg' }})"{% endif %}>
      <div class="ImageHero__ImageWrapper">
        <div class="ImageHero__Image Image--lazyLoad Image--zoomOut"
             data-optimumx="1.4"
             data-expand="-150"
             {% if image %}data-bgset="{{ image | img_url: mobile_size, crop: 'center' }} 750w, {{ image | img_url: '1000x' }} 1000w, {{ image | img_url: '1500x' }} 1500w"{% endif %}>
        </div>

        <noscript>
          <div class="ImageHero__ImageWrapper" style="background-image: url({{ image | img_url: '1000x' }})"></div>
        </noscript>

        {%- unless image != blank -%}
          <div class="PlaceholderBackground PlaceholderBackground--Dark">
            {{ 'lifestyle-1' | placeholder_svg_tag: 'PlaceholderBackground__Svg' }}
          </div>
        {%- endunless -%}
      </div>
    </div>
  </div>

<div class="Container banner-container">

    <header class="SectionHeader">
      {%- if  title -%}
        <h3 class="SectionHeader__SubHeading Heading u-h3">{{ title }}</h3>
      {%- endif -%}
    </header>
    <div class="Grid Grid--m Grid--center">
      <div class="Grid__Cell 1/2--tablet 1/3--lap-and-up ">
        <div class="product-blocks__holder">
          <div class="product-blocks__image">
            {% assign img = block.settings.icon | img_url: '200x' %}
            <img src="{{ img }}" class="icon icon-custom" style="height: {{ block.settings.height }}px; margin-top: {{ margin_top }}px">
          </div>
          {% if block.settings.icontitle != blank %}
            <h3 class="Heading u-h2">{{ block.settings.icontitle }}</h3>
          {% endif %}
          <div class="rte">
            {{ block.settings.iconcontent }}
          </div>
        </div>
      </div>

      <div class="Grid__Cell 1/2--tablet 1/3--lap-and-up">
        <div class="product-blocks__holder">
          <div class="product-blocks__image">
            {% assign img = block.settings.icon2 | img_url: '200x' %}
            <img src="{{ img }}" class="icon icon-custom" style="height: {{ block.settings.height }}px; margin-top: {{ margin_top }}px">
          </div>
          {% if block.settings.icontitle2 != blank %}
            <h3 class="Heading u-h2">{{ block.settings.icontitle2 }}</h3>
          {% endif %}
          <div class="rte">
            {{ block.settings.iconcontent2 }}
          </div>
        </div>
      </div>

      <div class="Grid__Cell 1/2--tablet 1/3--lap-and-up">
        <div class="product-blocks__holder">
          <div class="product-blocks__image">
            {% assign img = block.settings.icon3 | img_url: '200x' %}
            <img src="{{ img }}" class="icon icon-custom" style="height: {{ block.settings.height }}px; margin-top: {{ margin_top }}px">
          </div>
          {% if block.settings.icontitle3 != blank %}
            <h3 class="Heading u-h2">{{ block.settings.icontitle3 }}</h3>
          {% endif %}
          <div class="rte">
            {{ block.settings.iconcontent3 }}
          </div>
        </div>
      </div>
    </div>

      {% endif %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Image with Icons",
  "settings": [],
  "blocks": [
    {
      "type": "banner",
      "name": "Image with icons",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "image_picker",
          "id": "banner",
          "label": "Image banner"
        },
        {
          "type": "text",
          "id": "maintitle",
          "label": "Main title"
        },
        {
          "type": "header",
          "content": "Icon with Text"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon",
          "info": "png recommended"
        },
        {
          "type": "text",
          "id": "icontitle",
          "label": "Icon Title"
        },
        {
          "type": "richtext",
          "id": "iconcontent",
          "label": "Content"
        },
        {
          "type": "header",
          "content": "Icon with Text 2"
        },
        {
          "type": "image_picker",
          "id": "icon2",
          "label": "Icon",
          "info": "png recommended"
        },
        {
          "type": "text",
          "id": "icontitle2",
          "label": "Icon Title"
        },
        {
          "type": "richtext",
          "id": "iconcontent2",
          "label": "Content"
        },
        {
          "type": "header",
          "content": "Icon with Text 3"
        },
        {
          "type": "image_picker",
          "id": "icon3",
          "label": "Icon",
          "info": "png recommended"
        },
        {
          "type": "text",
          "id": "icontitle3",
          "label": "Icon Title"
        },
        {
          "type": "richtext",
          "id": "iconcontent3",
          "label": "Content"
        }
      ]
    }
  ]
}
{% endschema %}
