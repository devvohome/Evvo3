{% layout none %}
{% if cart.items.size == 0 %}
<script>top.location.href="/cart";</script>
{% endif %}
<!doctype html>
<html class="js windows chrome desktop page--no-banner page--logo-main page--show page--show card-fields cors svg opacity placeholder no-touchevents displaytable display-table generatedcontent cssanimations flexbox no-flexboxtweener anyflexbox no-shopemoji floating-labels" lang="{{ shop.locale }}" dir="ltr">
  <head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    {% include "load-metafields" %}

    <link rel="stylesheet" href="https://obscure-escarpment-2240.herokuapp.com/stylesheets/bcpo-front.css">
    <script>var bcpo_product={{ product | json }}; {% if product.metafields.bcpo.bcpo_data %}var bcpo_data={{ product.metafields.bcpo.bcpo_data }};{% endif %} {% if shop.metafields.bcpo.bcpo_settings %}var bcpo_settings={{ shop.metafields.bcpo.bcpo_settings }};{% endif %}var bcpo_cdn = "{{'bcpo_cdn'|asset_url}}";var inventory_quantity = [];{% for v in product.variants %}inventory_quantity.push({{v.inventory_quantity}});{% endfor %}if(bcpo_product) { for (var i = 0; i < bcpo_product.variants.length; i += 1) { bcpo_product.variants[i].inventory_quantity = inventory_quantity[i]; }}window.bcpo = window.bcpo || {}; bcpo.cart = {{cart | json}};</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height, minimum-scale=1.0, user-scalable=0">
    <meta name="theme-color" content="{{ settings.accent_color }}">
    <meta name="google-site-verification" content="d2I1hxHueqkxBB9k2crbZ0g1yRRexvvbnNus9Hkrx6g" />
    <title>
      {{ page_title }}{% if current_tags %}{% assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags }}{% endif %}{% if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif %}{% unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless %}
    </title>

    {%- if page_description -%}
    <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}

    <link rel="canonical" href="{{ canonical_url }}">

    {%- if settings.favicon -%}
    <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
    {%- endif -%}

    <link rel="stylesheet" href="{{ 'theme.scss.css' | asset_url }}">

    <script>
      // This allows to expose several variables to the global scope, to be used in scripts
      window.theme = {
        template: {{ template.name | json }},
        shopCurrency: {{ shop.currency | json }},
        moneyFormat: {{ shop.money_format | json }},
        moneyWithCurrencyFormat: {{ shop.money_with_currency_format | json }},
        currencyConversionEnabled: {{ settings.currency_conversion_enabled | json }},
        currencyConversionMoneyFormat: {{ settings.currency_conversion_money_format | json }},
        currencyConversionRoundAmounts: {{ settings.currency_conversion_round_amounts | json }},
        productImageSize: {{ settings.product_image_size | json }},
        searchMode: {{ settings.search_mode | json }},
        showPageTransition: {{ settings.show_page_transition | json }},
        showElementStaggering: {{ settings.show_element_staggering | json }},
        showImageZooming: {{ settings.show_image_zooming | json }},
        enableExperimentalResizeObserver: false
      };

      window.languages = {
        cartAddNote: {{ 'cart.general.add_note' | t | json }},
        cartEditNote: {{ 'cart.general.edit_note' | t | json }},
        productImageLoadingError: {{ 'product.slideshow.image_loading_error' | t | json }},
        productFormAddToCart: {% if product.template_suffix == 'pre-order' %}{{ 'product.form.pre_order' | t | json }}{% else %}{{ 'product.form.add_to_cart' | t | json }}{% endif %},
        productFormUnavailable: {{ 'product.form.unavailable' | t | json }},
        productFormSoldOut: {{ 'product.form.sold_out' | t | json }},
        shippingEstimatorOneResult: {{ 'cart.shipping_estimator.one_result_title' | t | json }},
        shippingEstimatorMoreResults: {{ 'cart.shipping_estimator.more_results_title' | t | json }},
        shippingEstimatorNoResults: {{ 'cart.shipping_estimator.no_results_title' | t | json }}
      };

      window.lazySizesConfig = {
        loadHidden: false,
        hFac: 0.5,
        expFactor: 2,
        ricTimeout: 150,
        lazyClass: 'Image--lazyLoad',
        loadingClass: 'Image--lazyLoading',
        loadedClass: 'Image--lazyLoaded'
      };

      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
      document.documentElement.style.setProperty('--window-height', window.innerHeight + 'px');

      // We do a quick detection of some features (we could use Modernizr but for so little...)
      (function() {
        document.documentElement.className += ((window.CSS && window.CSS.supports('(position: sticky) or (position: -webkit-sticky)')) ? ' supports-sticky' : ' no-supports-sticky');
        document.documentElement.className += (window.matchMedia('(-moz-touch-enabled: 1), (hover: none)')).matches ? ' no-supports-hover' : ' supports-hover';
      }());

      window.onpageshow = function (event) {
        if (event.persisted) {
          window.location.reload();
        }
      };
    </script>

    <script src="{{ 'lazysizes.min.js' | asset_url }}" async></script>

    {% if settings.currency_conversion_enabled %}
    <script src="//cdn.shopify.com/s/javascripts/currencies.js" defer></script>
    {% endif %}

    {%- if template == 'customers/addresses' -%}
    <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer></script>
    <script src="{{ 'customer_area.js' | shopify_asset_url }}" defer></script>
    {%- endif -%}

    <script src="https://cdn.polyfill.io/v3/polyfill.min.js?unknown=polyfill&features=fetch,Element.prototype.closest,Element.prototype.remove,Element.prototype.classList,Array.prototype.includes,Array.prototype.fill,Object.assign,CustomEvent,IntersectionObserver,IntersectionObserverEntry" defer></script>
    <script src="{{ 'libs.min.js' | asset_url }}" defer></script>
    <script src="{{ 'theme.min.js' | asset_url }}" defer></script>
    <script src="{{ 'custom.js' | asset_url }}" defer></script>

    {% include 'microdata-schema' %}
    <script>var scaaffCheck = false;</script>
    {{ 'sca_affiliate.js' | asset_url | script_tag }}
    <script src="//staticxx.s3.amazonaws.com/aio_stats_lib_v1.min.js?v=1.0"></script>

    <!-- REAMAZE INTEGRATION START - DO NOT REMOVE -->
    {% include 'reamaze-config' %}
    {% include 'reamaze-sso' %}
    <!-- REAMAZE INTEGRATION END - DO NOT REMOVE -->


    {% include 'shogun-head' %}

    {% if handle contains 'lavadoras-carga-superior' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}   
    {% if handle contains 'lavadoras-blanco' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}    
    {% if handle contains 'secadoras-inox' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}
    {% if handle contains 'lavadoras inox' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}
    {% if handle contains 'secadoras-blanco' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}
    {% if handle contains 'configurador-apple' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      
    {% if handle contains 'configurador-frigorificos' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      
    {% if handle contains 'configurador-tv' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}  
    {% if handle contains 'configurador-lavavajillas' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      
    {% if handle contains 'Configurador Secadoras' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      
    {% if handle contains 'configurador-lavadoras-secadoras' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      
    {% if handle contains 'configurador-lavadoras' %}
    <meta name="robots" content="noindex,nofollow">
    {% endif %}      

    <script async="true" type="text/javascript" src="https://s.kk-resources.com/leadtag.js" ></script>    
    <script src="{{ 'config_pepper.js' | asset_url }}" async></script>
    <style> 
      .hidden {
          display: none !important;
      }
      body {
          font-size: 14px;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
          line-height: 1.3em;
          overflow-wrap: break-word;
          word-wrap: break-word;
          word-break: break-word;
          -webkit-font-smoothing: subpixel-antialiased;
      }
      .wrap {    
          margin: 0 auto;
          zoom: 1;
      }
      .anyflexbox body, .anyflexbox .content, .anyflexbox .content .wrap, .anyflexbox .main{
          display: flex;
          flex: 1 0 auto;
          -webkit-box-orient: vertical;    
          flex-direction: column;
          -webkit-box-flex: 1;
          -webkit-box-direction: normal;
      }
      .wrap:after, .wrap:before {
          content: "";
          display: table;
      }
      .wrap:after {
          clear: both;
      }
      .logo--center {
          text-align: center;
      }
      .logo {    
          vertical-align: middle;
      }
      .logo__image--large {
          max-height: 3.5714285714em;
      }
      .logo__image {
          display: inline-block;
      }
      .visually-hidden {
          border: 0;    
          clip: rect(0 0 0 0);
          width: 2px;
          height: 2px;
          margin: -2px;
          overflow: hidden;
          padding: 0;
          position: absolute;
      }
      .breadcrumb--center {
          text-align: center;
          -webkit-box-pack: center;
          justify-content: center;
      }
      .breadcrumb {
          display: flex;
          flex-wrap: wrap;
      }
      .anyflexbox .breadcrumb__item {
          display: flex;
          -webkit-box-align: center;
          align-items: center;
      }
      .breadcrumb__item {
          font-size: 0.8571428571em;
          color: #737373;
      }
      a, .link {
          text-decoration: none;
          color: #2d76bb;
          transition: color 0.2s ease-in-out;
      }
      .icon-svg--size-10 {
          width: 10px;
          height: 10px;
      }
      .breadcrumb__chevron-icon {
          margin: 0 0.6428571429em;
      }
      .main .icon-svg--color-adaptive-light {
          color: #737373;
          fill: currentColor;
      }
      .icon-svg {
          display: inline-block;
          vertical-align: middle;
          fill: currentColor;
      }
      .breadcrumb__item--current {
          font-weight: 500;
          color: #333333;
      }
      .anyflexbox .main__content {
          -webkit-box-flex: 1;
          flex: 1 0 auto;
      }
      form {
          margin: 0;
      }
      .section:first-child {
          padding-top: 0;
      }
      .section {
          position: relative;
      }
      .section__header {
          position: relative;
      }
      .layout-flex--loose-horizontal {
          margin-left: -0.5714285714rem;
          margin-right: -0.5714285714rem;
      }
      .layout-flex--tight-vertical {
          margin-bottom: -0.1428571429rem;
          margin-top: -0.1428571429rem;
      }
      .layout-flex--wrap {
          flex-wrap: wrap;
      }
      .layout-flex {
          -webkit-box-align: baseline;
          align-items: baseline;
          display: flex;
      }
      .layout-flex--loose-horizontal .layout-flex__item {
          padding-left: 0.5714285714rem;
          padding-right: 0.5714285714rem;
      }
      .layout-flex--tight-vertical .layout-flex__item {
          padding-bottom: 0.1428571429rem;
          padding-top: 0.1428571429rem;
      }
      .layout-flex__item--stretch {
          -webkit-box-flex: 1;
          flex: 1 1 auto;
      }
      h2, .heading-2 {
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
          font-size: 1.2857142857em;
          line-height: 1.3em;
      }
      .section__content:after, .section__content:before {
          content: "";
          display: table;
      }
      .section__content:after {
          clear: both;
      }
      .fieldset {
          margin: -0.4285714286em;
          zoom: 1;
      }
      .fieldset:after, .fieldset:before {
          content: "";
          display: table;
      }
      .fieldset:after {
          clear: both;
      }
      .field {
          width: 100%;
          float: left;
          padding: 0.4285714286em;
          box-sizing: border-box;
      }
      .field__input-wrapper {
          position: relative;
      }
      .floating-labels .main .field__label {
          color: #737373;
      }
      .floating-labels .field__label {
          font-size: 0.8571428571em;
          font-weight: normal;
          position: absolute;
          top: 0;
          width: 100%;
          margin-top: 0.4285714286em;
          margin-left: 1px;
          padding: 0 0.9166666667em;
          z-index: 1;
          user-select: none;
          transform: translateY(3px);
          pointer-events: none;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          box-sizing: border-box;
          opacity: 0;
      }
      .field__label--visible {
          display: block;
      }
      .field__label {
          text-align: left;
          margin: 0.5em 0;
      }
      .main .field__input {
          background-color: white;
          color: #333333;
          border-color: #d9d9d9;
      }
      .field__input {
          border: 1px transparent solid;
          background-clip: padding-box;
          border-radius: 5px;
          display: block;
          box-sizing: border-box;
          width: 100%;
          padding: 0.9285714286em 0.7857142857em;
          word-break: normal;
          line-height: inherit;
      }
      .fieldset-description {
          margin-top: 0.9285714286em;
      }
      .radio-wrapper:last-child, .checkbox-wrapper:last-child {
          margin-bottom: 0;
      }
      .display-table .radio-wrapper, .display-table .checkbox-wrapper {
          display: table;
          box-sizing: border-box;
          width: 100%;
      }
      .display-table .radio__input, .display-table .checkbox__input {
          display: table-cell;
      }
      .radio__input, .checkbox__input {
          padding-right: 0.75em;
          white-space: nowrap;
      }
      .main .input-checkbox, .main .input-radio {  
          border-color: #d9d9d9;
          background-color: white;
      }
      input[type="checkbox"], input[type="radio"] {
          box-sizing: border-box;
          padding: 0;
      }
      .input-checkbox {
          border-radius: 4px;
      }
      .input-checkbox, .input-radio {
          width: 18px;
          height: 18px;
          box-shadow: 0 0 0 0 #2d76bb inset;
          transition: all 0.2s ease-in-out;
          position: relative;
          cursor: pointer;
          vertical-align: -4px;
          border: 1px solid;
      }
      .display-table .radio__label, .display-table .checkbox__label {
          display: table-cell;
          width: 100%;
      }
      .radio__label, .checkbox__label {
          cursor: pointer;
          vertical-align: middle;
      }
      button, input, optgroup, select, textarea {
          color: inherit;
          font: inherit;
          appearance: none;
          -webkit-font-smoothing: inherit;
          background: transparent;
          line-height: normal;
      }
      .main__footer {
          padding: 1em 0;
          border-top: 1px solid #e6e6e6;
      }
      .copyright-text {
          font-size: 0.8571428571em;
          color: #737373;
      }
      .main .input-checkbox:hover, .main .input-radio:hover {
          border-color: #cccccc;
      }
      .input-checkbox:after, .input-radio:after {
          content: "";
          display: block;
          position: absolute;
          top: 50%;
          left: 50%;    
          transition: all 0.2s ease-in-out 0.1s;    
      }
      .input-checkbox:after {
          width: 10px;
          height: 8px;
          margin-left: -5px;
          margin-top: -4px;
          background-image: url(//cdn.shopify.com/s/assets/checkout/checkbox-tick-66a9a39f70a44a226223ef4c61a701d2d10afaa73ba8846a509fbe58a82f3f36.svg),none;
      }
      .input-checkbox:checked, .input-radio:checked {
          border: none;
          -webkit-box-shadow: 0 0 0 10px #2d76bb inset;
          box-shadow: 0 0 0 10px #2d76bb inset;
      }
      .input-checkbox:checked:after, .input-radio:checked:after {
          transform: scale(1);
          opacity: 1;
      }
      .radio-wrapper:after, .radio-wrapper:before, .checkbox-wrapper:after, .checkbox-wrapper:before {
          content: "";
          display: table;
      }
      .input-checkbox:focus, .input-radio:focus {
          border: 2px solid #2d76bb;
      }
      .animate-floating-labels .field__input {    
          transition: all 0.2s ease-out;
      }
      .floating-labels .field--show-floating-label .field__label {
          transform: none;
          opacity: 1;
      }
      .animate-floating-labels .field__label {    
          transition: all 0.2s ease-out;
      }
      .field__input-wrapper--icon-right .field__input {
          padding-right: 2.8571428571rem;
      }
      .field__input--zip {
          text-transform: uppercase;
      }
      .field__input--select {
          padding-right: 2.0714285714em;
          white-space: nowrap;
      }
      option {
          background-color: #fff;
          color: #000;
      }
      .main .field__caret {
          border-left: 1px rgba(179,179,179,0.5) solid;
      }
      .field__caret {
          display: block;
          width: 2.1428571429em;
          height: 43%;
          pointer-events: none;
          position: absolute;
          top: 50%;
          right: 0;
          transform: translate(0%, -50%);
      }
      .main .field__icon .icon-svg--color-adaptive-lighter, .main .field__caret .icon-svg--color-adaptive-lighter {
          color: #919191;
          fill: currentColor;
      }
      .field__caret-svg {
          position: absolute;
          margin-left: -2px;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
      }
      .floating-labels .field__input-wrapper--icon-right .field__label {
          padding-right: 2.8571428571rem;
      }
      .field__input-wrapper--icon-right .field__icon {
          right: 0;
      }
      .field__icon {
          display: block;
          height: 100%;
          position: absolute;
          top: 0;
          width: 2.8571428571rem;
      }
      .tooltip-container {
          position: relative;
          height: 100%;
          width: 100%;
      }
      .tooltip-container .tooltip-control {
          position: absolute;
          height: 100%;
          width: 100%;
      }
      button, input[type="button"], input[type="reset"], input[type="submit"] {
          appearance: button;
          cursor: pointer;
      }
      button, select {
          text-transform: none;
      } 
      button {
          overflow: visible;
      } 
      .icon-svg--size-16 {
          width: 16px;
          height: 16px;
      }
      .icon-svg--block {
          display: block;
      }
      .tooltip:after {
          content: "";
          position: absolute;
          top: 100%;
          width: 0;
          right: 18px;
          border: 6px solid transparent;
          border-top-color: rgba(51,51,51,0.9);
      }
      .radio-wrapper:after, .checkbox-wrapper:after {
          clear: both;
      }
      .step__footer {
          z-index: 2;
          position: relative;
          margin-top: 1em;
      }
      .btn, .sp-modal-toggle {
          cursor: pointer;
          display: inline-block;
          background-color: #2d76bb;
          background-clip: border-box;
          box-sizing: border-box;
          border: 1px transparent solid;
          border-radius: 5px;
          color: white;
          font-weight: 500;
          padding: 1.4em 1.7em;
          text-align: center;
          position: relative;
          transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, -webkit-box-shadow 0.2s ease-in-out;
      }
      .btn__content {
          position: relative;
          transition: opacity 0.3s ease-in-out;
      }
      .btn__spinner {
          position: absolute;
          top: 50%;
          left: 50%;
          margin-top: -10px;
          margin-left: -10px;
          transition: opacity 0.3s ease-in-out;
          opacity: 0;
      }
      .icon-svg--spinner-button {
          width: 20px;
          height: 20px;
      }
      .step__footer__previous-link, .step__footer__info {
          display: block;
      }
      a, .link {
          text-decoration: none;
          color: #2d76bb;
          transition: color 0.2s ease-in-out;
      }
      .step__footer__previous-link-content {
          vertical-align: middle;
      }
      .icon-svg--color-accent {
          color: #2d76bb;
          fill: currentColor;
      }
      .previous-link__icon {
          transition: all 0.2s cubic-bezier(0.3, 0, 0, 1);
          margin-right: 0.25em;
      }
      .icon-svg--center {
          position: absolute;
          left: 50%;
          right: 50%;
          transform: translate(-50%, -50%);
      }
      .main__footer {
          padding: 1em 0;
          border-top: 1px solid #e6e6e6;
      }
      .copyright-text {
          font-size: 0.8571428571em;
          color: #737373;
      }
      .sidebar::after {
          content: "";
          display: block;
          width: 300%;
          position: absolute;
          top: 0;
          left: -100%;
          bottom: 0;
          background: #efefef;
          z-index: -1;
          box-shadow: 0 -1px 0 #d7d7d7 inset;
      }
      .js .visually-hidden-if-js {
          border: 0;
          clip: rect(0 0 0 0);
          width: 2px;
          height: 2px;
          margin: -2px;
          overflow: hidden;
          padding: 0;
          position: absolute;
      }
      .product-table__header th {
          white-space: nowrap;
          font-weight: 500;
          color: #333333;
      }
      .product-table th, .product-table td {
          padding-top: 0;
          padding-bottom: 0;
      }
      td:first-child, th:first-child {
          padding-left: 0;
          text-align: left;
      }
      .product:first-child td {
          padding-top: 0;
      }
      .product-table td {
          border-color: #fad9d9;
      }
      .product-thumbnail {
          width: 4.6em;
          height: 4.6em;
          border-radius: 8px;
          background: #fff;
          position: relative;
      }
      .product-thumbnail::after {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          left: 0;
          bottom: 0;
          right: 0;
          border-radius: 8px;
          border: 1px rgba(0,0,0,0.1) solid;
          z-index: 2;
      }
      .product-thumbnail__wrapper {
          width: 100%;
          height: 100%;
          position: relative;
          overflow: hidden;
          border-radius: 8px;
          z-index: 1;
      }
      .product-thumbnail__image {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          max-width: 100%;
          max-height: 100%;
          margin: auto;
      }
      .product-thumbnail__quantity {
          font-size: 0.8571428571em;
          font-weight: 500;
          line-height: 1.75em;
          white-space: nowrap;
          text-align: center;
          border-radius: 1.75em;
          background-color: rgba(114,114,114,0.9);
          color: #fff;
          box-sizing: border-box;
          min-width: 1.75em;
          height: 1.75em;
          padding: 0 0.5833333333em;
          position: absolute;
          right: -0.75em;
          top: -0.75em;
          z-index: 3;
      }
      .product__description {
          text-align: left;
          width: 100%;
      }
      td, th {
          padding-left: 1em;
          font-weight: normal;
      }
      .sidebar .order-summary__emphasis {
          color: #303030;
      }
      .product__description__name {
          width: 1em;
          min-width: 100%;
      }
      .product__description__name, .product__description__variant, .product__description__property {
          display: block;
      }
      .order-summary__emphasis {
          font-weight: 500;
      }
      .sidebar .order-summary__small-text {
          color: #6c6c6c;
      }
      .order-summary__small-text {
          font-size: 0.8571428571em;
      }
      .product__price {
          white-space: nowrap;
      }
      td:last-child, th:last-child {
          text-align: right;
      }
      .order-summary__scroll-indicator {
          background-color: rgba(48,48,48,0.85);
          border-radius: 2em;
          bottom: 1.5em;
          color: #efefef;
          font-size: 0.8571428571em;
          left: 50%;
          opacity: 0;
          padding: 0.6em 1.2em;
          position: absolute;
          transform: translateX(-50%) translateY(100%) rotateZ(360deg);
          transition: all 0.3s cubic-bezier(0.3, 0, 0, 1);
          white-space: nowrap;
          z-index: 2;
      }
      .order-summary__scroll-indicator .icon-svg {
          margin-left: 0.2142857143em;
          margin-top: -0.2142857143em;
      }
      .icon-svg--size-12 {
          width: 12px;
          height: 12px;
      }
      .order-summary__section {
          padding-top: 1.5em;
          padding-bottom: 1.5em;
      }
      .sidebar .field__input {
          background-color: white;
          color: #333333;
          border-color: #cbcbcb;
      }
      .js .sidebar .btn--disabled {
          cursor: default;
          background: #bfbfbf;
          box-shadow: none;
      }
      .anyflexbox .field__input-btn {
          width: auto;
          margin-left: 0.8571428571em;
          white-space: nowrap;
          padding-top: 0;
          padding-bottom: 0;
      }
      .btn__icon {
          margin-top: -0.2857142857em;
          margin-bottom: -0.0714285714em;
      }
      .icon-svg--size-18 {
          width: 18px;
          height: 18px;
      }
      .order-summary__section~.order-summary__section {
          border-top: 1px solid rgba(167,167,167,0.34);
      }
      .total-line:first-child th, .total-line:first-child td {
          padding-top: 0;
      }
      .total-line__price {
          padding-left: 1.5em;
          text-align: right;
          white-space: nowrap;
      }
      .total-line th, .total-line td {
          padding-top: 0.75em;
      }
      .total-line-table__tbody+.total-line-table__tbody .total-line:first-child th, .total-line-table__tbody+.total-line-table__tbody .total-line:first-child td, .total-line-table__tbody+.total-line-table__footer .total-line:first-child th, .total-line-table__tbody+.total-line-table__footer .total-line:first-child td {
          padding-top: 3em;
          position: relative;
      }
      .sidebar .total-line-table__tbody+.total-line-table__tbody .total-line:first-child th::before, .sidebar .total-line-table__tbody+.total-line-table__tbody .total-line:first-child td::before, .sidebar .total-line-table__tbody+.total-line-table__footer .total-line:first-child th::before, .sidebar .total-line-table__tbody+.total-line-table__footer .total-line:first-child td::before {
          background-color: rgba(167,167,167,0.34);
      }
      .total-line-table__tbody+.total-line-table__tbody .total-line:first-child th::before, .total-line-table__tbody+.total-line-table__tbody .total-line:first-child td::before, .total-line-table__tbody+.total-line-table__footer .total-line:first-child th::before, .total-line-table__tbody+.total-line-table__footer .total-line:first-child td::before {
          content: '';
          position: absolute;
          top: 1.5em;
          left: 0;
          width: 100%;
          height: 1px;
      }
      .sidebar .payment-due-label__total {
          color: #303030;
      }
      .payment-due-label__total {
          font-size: 1.1428571429em;
      }
      .sidebar .payment-due-label__taxes {
          color: #6c6c6c;
      }
      .payment-due-label__taxes {
          display: block;
      }
      .payment-due__price {
          font-size: 1.7142857143em;
          font-weight: 500;
          letter-spacing: -0.04em;
          line-height: 1em;
      }
      .content {
          overflow: hidden;
      }
      .product td {
          padding-top: 1em;
      }
      .btn:active, .sp-modal-toggle:active {
          outline: none;
      }
      .btn:hover, .sp-modal-toggle:hover {
          background-color: #235c92;
          color: white;
      }
      .anyflexbox .field__input-btn-wrapper {
          display: flex;
      }
      body {
          color: #545454;
          background: white;
          font-weight: normal;
      }
      .anyflexbox .field__input-btn-wrapper .field__input-wrapper {
          -webkit-box-flex: 1;
          flex-grow: 1;
      }
      .main .content-box {
          border-color: #d9d9d9;
      }
      .content-box {
          background: #fff;
          background-clip: padding-box;
          border: 1px solid;
          border-radius: 5px;
          color: #545454;
      }
      .content-box__row:last-child {
          border-bottom-left-radius: 4px;
          border-bottom-right-radius: 4px;
      }
      .content-box__row:first-child {
          border-top-left-radius: 4px;
          border-top-right-radius: 4px;
      }
      .display-table .content-box__row {
          display: table;
          box-sizing: border-box;
          width: 100%;
      }
      .content-box__row--tight-spacing-vertical {
          padding-top: 0.8571428571em;
          padding-bottom: 0.8571428571em;
      }
      .content-box__row {
          padding: 1.1428571429em;
          position: relative;
          zoom: 1;
      }
      .content-box__row:after, .content-box__row:before {
          content: "";
          display: table;
      }
      .content-box__row:after {
          clear: both;
      }
      .review-block {
          display: flex;
      }
      .review-block__inner {
          display: flex;
          -webkit-box-flex: 1;
          flex: 1;
      }
      .review-block__link {
          max-width: 10em;
          font-size: 0.8571428571em;
      }
      .review-block__label {
          color: #737373;
          padding-right: 1.1428571429em;
          -webkit-box-flex: 0;
          flex: 0 1 6em;
      }
      .review-block__content {
          -webkit-box-flex: 5;
          flex: 5;
          color: #333333;
          padding-right: 1.1428571429em;
      }
      .review-block~.review-block {
          margin-top: 0.8571428571em;
          padding-top: 0.8571428571em;
          border-top: 1px solid #e6e6e6;
      }
      .address--tight {
          line-height: inherit;
      }
      .content-box:first-of-type, .content-box-spacing:first-of-type {
          margin-top: 0;
      }
      .content-box .input-checkbox, .content-box .input-radio {
          border-color: #d9d9d9;
          background-color: white;
      }
      .input-radio {
          border-radius: 50%;
      }
      .input-radio:after {
          width: 4px;
          height: 4px;
          margin-left: -2px;
          margin-top: -2px;
          background-color: #fff;
          border-radius: 50%;
      }
      .input-checkbox:after, .input-radio:after {
          content: "";
          display: block;
          position: absolute;
          top: 50%;
          left: 50%;
          transition: all 0.2s ease-in-out 0.1s;    
      }
      .display-table .radio__label__primary {
          display: table-cell;
          width: 100%;
      }
      .radio__label__primary {
          cursor: inherit;
          font-family: inherit;
          vertical-align: top;
      }
      .display-table .radio__label__accessory {
          display: table-cell;
      }
      .radio__label__accessory {
          text-align: right;
          padding-left: 0.75em;
          white-space: nowrap;
      }
      .content-box__emphasis {
          font-weight: 500;
          color: #333333;
      }
      .content-box__row~.content-box__row {
          border-top: 1px solid #d9d9d9;
      }
      .content-box .small-text {
          color: #737373;
      }
      .small-text {
          font-size: 0.8571428571em;
      }
      .field__input:focus, .field__input-wrapper--flag-focus{
          outline: none;
          border-color: #2d76bb;
          box-shadow: 0 0 0 1px #2d76bb;
      }
      input::placeholder {
          color: #737373;  
          text-transform: Capitalize;
      }
      .btn--loading .btn__spinner {
          -webkit-animation: rotate 0.5s linear infinite;
          animation: rotate 0.5s linear infinite;
          opacity: 1;
          color: white;
      }
      .btn--loading .btn__content, .btn--loading .btn__icon{
          opacity: 0;
      }
      .content-box__row--secondary {
          background-color: #fafafa;
      }
      .content-box__row--secondary.secondary-pepper{
        background-color: #fff;
      }
      .blank-slate__icon {
          margin-bottom: 1.1428571429em;
      }
      .blank-slate {
          padding: 1.1428571429em;
          text-align: center;
      }
      .icon {
          background-position: center center;
          background-repeat: no-repeat;
          display: inline-block;
      }
      .radio-wrapper.content-box__row, .checkbox-wrapper.content-box__row {
          margin-bottom: 0;
      }
      fieldset {
          margin: 0;
          padding: 0;
      }
      .radio__label__accessory .payment-icon {
          cursor: default;
          margin: -0.1428571429em 0 -0.4285714286em;
      }
      .payment-icon {
          border-radius: 0.2142857143em;
          background-size: cover;
          background-repeat: no-repeat;
          transition: all 0.2s ease-in-out;
          width: 2.7142857143em;
          height: 1.7142857143em;
          display: inline-block;
      }
      .payment-icon--visa {
          background-image: url(//cdn.shopify.com/s/assets/payment_icons/visa-319d545c6fd255c9aad5eeaad21fd6f7f7b4fdbdb1a35ce83b89cca12a187f00.svg),none;
      }
      .payment-icon--master {
          background-image: url(//cdn.shopify.com/s/assets/payment_icons/master-173035bc8124581983d4efa50cf8626e8553c2b311353fbf67485f9c1a2b88d1.svg),none;
      }
      .tooltip-container.show-tooltip .tooltip, .tooltip-container:hover .tooltip, .tooltip-container:focus .tooltip, .has-tooltip.show-tooltip .tooltip, .has-tooltip:hover .tooltip, .has-tooltip:focus .tooltip {
          transform: rotateX(0deg) scale(1);
          pointer-events: auto;
          visibility: visible;
          opacity: 1;
      }
      .order-summary-toggle {
          background: #fafafa;
          border-top: 1px solid #e6e6e6;
          border-bottom: 1px solid #e6e6e6;
          padding: 1.25em 0;
          flex-shrink: 0;
          text-align: left;
          width: 100%;
      }
      .display-table .order-summary-toggle__inner {
          display: table;
          box-sizing: border-box;
          width: 100%;
      }
      .display-table .order-summary-toggle__icon-wrapper {
          display: table-cell;
      }
      .order-summary-toggle__icon-wrapper {
          vertical-align: middle;
          padding-right: 0.75em;
          white-space: nowrap;
      }
      .display-table .order-summary-toggle--show .order-summary-toggle__text--show, .display-table .order-summary-toggle--hide .order-summary-toggle__text--hide {
          display: table-cell;
          width: 100%;
      }
      .order-summary-toggle:hover .order-summary-toggle__text, .order-summary-toggle:focus .order-summary-toggle__text {
          color: #235c92;
      }
      .order-summary-toggle:hover .order-summary-toggle__icon, .order-summary-toggle:focus .order-summary-toggle__icon {
          fill: #235c92;
      }
      .order-summary-toggle__inner:after, .order-summary-toggle__inner:before {
          content: "";
          display: table;
      }
      .order-summary-toggle__inner:after {
          clear: both;
      } 
      .order-summary-toggle__icon {
          transition: fill 0.2s ease-in-out;
      }
      .order-summary-toggle--show .order-summary-toggle__text--show, .order-summary-toggle--hide .order-summary-toggle__text--hide {
          display: block;
      }
      .order-summary-toggle__text {
          color: #2d76bb;
          vertical-align: middle;
          -webkit-transition: color 0.2s ease-in-out;
          transition: color 0.2s ease-in-out;
          display: none;
      }
      .display-table .order-summary-toggle__total-recap {
          display: table-cell;
      }
      .order-summary-toggle__total-recap {
          vertical-align: middle;
          text-align: right;
          padding-left: 0.75em;
          white-space: nowrap;
      }
      .total-recap__final-price {
          font-size: 1.2857142857em;
          line-height: 1em;
          color: #333333;
      }
      .wrap {
          display: block;
          margin: 0 auto;
          max-width: 40em;
          zoom: 1;
      }
      .anyflexbox .content .wrap {
          -webkit-box-orient: vertical;
          flex-direction: column-reverse;
      }
      .main .logo {
          display: none;
      }
      .sidebar {
          position: relative;
          color: #4f4f4f;
      }
      .icon-symbols {
          display: none;
      }
      .anyflexbox .banner {
          flex-shrink: 0;
      }
      .banner {
          padding: 1.5em 0;
          background: transparent;
          background-size: cover;
          display: none;
      }
      .logo {
          display: block;
          vertical-align: middle;
      }
      button.order-summary-toggle:focus {
          border: 1.5px solid orange;
          border-radius: 3px;
      }
      table {
          width: 100%;
          border-collapse: collapse;
          border-spacing: 0;
          font-size: 1em;
      }
      .section {
          position: relative;
          padding-top: 2em;
      }
      .tooltip {
          box-sizing: border-box;
          position: absolute;
          bottom: 80%;
          width: 180px;
          margin: 0 0 5px 0;
          padding: 0.75em 1em;
          border-radius: 4px;
          white-space: normal;
          font-size: 0.8571428571em;
          font-style: normal;
          text-align: center;
          color: #fff;
          display: block;
          z-index: 200;
          transition: all 0.3s cubic-bezier(0.3, 0, 0, 1);
          transform: rotateX(20deg) scale(0.8);
          background-color: rgba(51,51,51,0.9);
          visibility: hidden;
          opacity: 0;
          transform-origin: 90% 120%;
          right: -0.3333333333em;
      }
      .field__message--error {
          display: none;
          color: #e4002b;
      }
      .field--error .field__message--error {
          display: block;
      }
      .field__message {
          line-height: 1.3em;
          margin: 0.5714285714em 0 0.2857142857em;
      }
      .js .main .btn--disabled {
          cursor: default;
          background: #cccccc;
          -webkit-box-shadow: none;
          box-shadow: none;
      }
      .logged-in-customer-information__avatar:before {
          background-repeat: no-repeat;
          content: '';
          display: block;
          width: 100%;
          height: 100%;
          position: absolute;
          top: 0;
          left: 0;
          z-index: -1;
          background-image: url(//cdn.shopify.com/s/assets/checkout/default-gravatar-11faae26fbe221b1adce53c912de14b0834d34e858817f045d2f38d02226354f.png);
          background-image: url(//cdn.shopify.com/s/assets/checkout/default-gravatar-5ad673c45c717c5f83e82f5087d841e9cdf55e4b38458bb0b7272b8585dd6b4f.svg),none;
      }
      .logged-in-customer-information {
          zoom: 1;
      }
      .display-table .logged-in-customer-information {
          display: table;
          -webkit-box-sizing: border-box;
          box-sizing: border-box;
          width: 100%;
      }
      .logged-in-customer-information:after, .logged-in-customer-information:before {
          content: "";
          display: table;
      }
      .logged-in-customer-information__avatar-wrapper {
          padding-right: 1em;
          white-space: nowrap;
          vertical-align: middle;
      }
      .display-table .logged-in-customer-information__avatar-wrapper {
          display: table-cell;
      }
      .logged-in-customer-information__avatar {
          border-radius: 8px;
          background-size: cover;
          position: relative;
          max-width: none;
          width: 50px;
          height: 50px;
          overflow: hidden;
      }
      .logged-in-customer-information__paragraph {
          padding-top: 0.25em;
          vertical-align: middle;
      }
      .display-table .logged-in-customer-information__paragraph {
          display: table-cell;
          width: 100%;
      }
      @-webkit-keyframes rotate{
          0%{
              -webkit-transform:rotate(0);
              transform:rotate(0); 
          }
          100%{
              -webkit-transform:rotate(360deg);
              transform:rotate(360deg);
          }
      }
      @keyframes rotate{
          0%{
              -webkit-transform:rotate(0);
              transform:rotate(0);
          }
          100%{
              -webkit-transform:rotate(360deg);
              transform:rotate(360deg);
          }
      }
      .address {
          font-style: normal;
          line-height: 1.5em;
      }
      .payment-method--pepper-container{
        text-align: center;
      }
      .notice{
        position: relative;
        display: flex;
        opacity: 1;
        margin-bottom: 1.4285714286em;
        padding: 1em;
        border-radius: 4px;
        border: 1px solid #d3e7f5;
        background-color: #eff8ff;
        color: #545454;
        -webkit-transition: opacity 0.5s ease-in-out;
        transition: opacity 0.5s ease-in-out;
      }
      .notice--warning{
        border-color: #f0e4bc;
        background-color: #fff8de;
      }
      .icon-svg{
        display: inline-block;
        vertical-align: middle;
        fill: currentColor;
      }
      .icon-svg--size-24{
        width: 24px;
        height: 24px;
      }
      .notice__icon{
        color: #197bbd;
        margin-top: -0.1428571429em;
        margin-right: 0.7142857143em;
      }
      .notice--warning .notice__icon{
        color: #b88600;
      }
      .notice__content {
        display: inline-flex;
        width: 100%;
        padding-right: 1.1428571429em;
      }
      .notice__controls {
        position: relative;
        padding: 1.1428571429em;
        -webkit-transition: color 0.2s ease-in-out;
        transition: color 0.2s ease-in-out;
        width: 46px;
        height: 46px;
        margin: -1.1428571429em;
      }
      .icon-svg--size-14 {
        width: 14px;
        height: 14px;
      }
      @media screen and (min-width: 1000px){
        .order-summary__section--has-scrollable{
          max-height: 170px;
        }
        .order-summary__section--has-scrollable:hover > .order-summary__section__content{
          overflow-y: scroll !important;
        }
      }
      .tags-list{
        width: 100%;
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
      }
      .tag {
        border-radius: 4px;
        background-color: rgba(108,108,108,0.11);
        color: #6c6c6c;
        font-size: 0.8571428571em;
        padding: 0.8571428571em;
        overflow: hidden;
      }
      .tags-list .tag {
        margin-top: 0.8571428571em;
        margin-right: 0.8571428571em;
      }
      .tags-list .tag:last-child{
        margin-right: 0;
      }
      .tag__wrapper {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
        width: 100%;
      }
      .tag__text {
        color: #303030;
        font-size: 1.1428571429em;
        font-weight: 500;
        overflow: hidden;
        display: inline-block;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .reduction-code__icon{
        margin-right: 0.1428571429em;
        vertical-align: top;
      }
      .sidebar .icon-svg--color-adaptive-light{
        color: #6c6c6c;
        fill: currentColor;
      }
      .reduction-code__text{
        font-size: 1em;
      }
      .sidebar .reduction-code__text{
        color: #303030;
      }
      .tag__button {
        margin-left: 0.8571428571em;
      }
      .tag__button .icon-svg {
        stroke: rgba(108,108,108,0.9);
      }
      .button-help--whatsapp{
        font-weight: 600;
        text-align: center;
        max-width: 100%;
        margin: 0 auto;
        border: 2px solid #e00631;
        border-radius: 5px;
        padding: 22px 18px;
        text-shadow: 0 0 #4f4f4f;
        display: none;
      }
      .button-help--whatsapp.button-help--only-mobile{
        display: block;
        margin-bottom: 1.5em;
        background-color: rgba(0,0,0,0.01);
      }

      @media (min-width: 1000px){
        .tags-list{
          float: left;
        }
        .anyflexbox .content .wrap {
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
        }
        .wrap {
            padding: 0 5%;
            width: 90%;
            max-width: 85.571429em;
        }  
        .page--no-banner .main, .page--no-banner .sidebar {
            padding-top: 4em;
        }
        .main {    
            width: 52%;
            padding-right: 6%;
            float: left;
        }
        .main__header {
            padding-bottom: 2em;
        }
        .page--logo-main .main .logo {
            display: block;
        }
        .logo__image--large {
            max-height: 5.7142857143em;
        }
        .page--logo-main .breadcrumb {
            margin-top: 1em;
        }
        .sidebar {
            width: 38%;
            padding-left: 4%;
            background-position: left top;
            float: right;
        }
        .sidebar__header {
            margin-bottom: 2.5em;
            display: none;
        }
        .sidebar::after {
            left: 0;
            background-position: left top;
            box-shadow: 1px 0 0 #d7d7d7 inset;
        }
        .order-summary__sections {
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            flex-direction: column;
            height: calc(100vh - 8em);
            width: 100%;
        }
        .order-summary__section:first-child {
            padding-top: 0;
        }
        .order-summary__section--product-list {
            display: flex;
            -webkit-box-flex: 0;
            flex: 0 1 auto;
            min-height: 7em;
            overflow: hidden;
            padding: 0;
            position: relative;
        }
        .order-summary__section--product-list::before {
            background-color: transparent;
            top: 0;
        }
        .order-summary__section--product-list::before, .order-summary__section--product-list::after {
            content: '';
            display: block;
            height: 1px;
            left: 0;
            position: absolute;
            transition: background-color 0.3s cubic-bezier(0.3, 0, 0, 1);
            width: 100%;
            z-index: 4;
        }
        .order-summary__section--product-list::after {
            background-color: rgba(167,167,167,0.34);
            bottom: 0;
        }
        .no-js .order-summary__section__content, .no-touchevents .order-summary__section__content {
            overflow: hidden;
        }
        .order-summary__section__content {
            min-width: 100%;
        }
        .order-summary__section--product-list .product-table {
            margin-top: 0.75em;
            margin-bottom: 1.5em;
            position: relative;
            z-index: 1;
        }
        .order-summary__section--product-list+.order-summary__section {
            border: 0;
        }
        .order-summary__section {
            -webkit-box-flex: 0;
            flex: 0 0 auto;
        }
        .page--logo-main .main .logo {
            display: block;
        }
        .order-summary-toggle {
            display: none;
        }
        .button-help--whatsapp.button-help--only-desktop{
          display: block;
        }
        .button-help--whatsapp.button-help--only-mobile{
          display: none;
        }
      }
      @media (max-width: 999px){
          .js .order-summary--is-collapsed {
              height: 0;
              visibility: hidden;
          }
          .order-summary--transition, .order-summary--is-collapsed {
              overflow: hidden;
          }
          .wrap {
              width: 100%;
              box-sizing: border-box;
              padding: 0 1em;
          }
          .breadcrumb {
              padding-bottom: 1.5em;
          }
          .banner {
              display: block;
          }
      }
      @media (min-width: 750px){
          h1, .heading-1 {
              font-size: 2em;
          }
          .main__content {
              padding-bottom: 4em;
          }
          .main {
              padding-top: 1.5em;
          }
          .section__header {
              margin-bottom: 1.5em;
          }
          .section {
              padding-top: 3em;
          }
          .floating-labels .address-fields {
              display: flex;
              flex-wrap: wrap;
          }
          .floating-labels .field--half {
              width: 50%;
          }
          .floating-labels .field--third {
              width: 33.3333333333%;
          }
          .tooltip {
              transform-origin: center 120%;
              right: 50%;
              margin-right: -90px!important;
          }
          .tooltip:after {
              right: 50%;
              margin-right: -6px;
              content: "";
              position: absolute;
              top: 100%;
              width: 0;
              border: 6px solid transparent;
              border-top-color: rgba(51,51,51,0.9);
          }
          .anyflexbox .step__footer {
              display: flex;
              -webkit-box-orient: horizontal;
              -webkit-box-direction: reverse;
              flex-direction: row-reverse;
              -webkit-box-align: center;
              align-items: center;
              -webkit-box-pack: justify;
              justify-content: space-between;
          }
          .step__footer {
              margin-top: 1.5em;
          }
          .step__footer__continue-btn {
              float: right;
          }
          .anyflexbox .step__footer__previous-link, .anyflexbox .step__footer__info {
              margin-right: 1em;
          }
          .step__footer__previous-link, .step__footer__info {
              float: left;
          }    
          .shown-on-mobile {
              display: none;
          }
          .hidden-on-desktop{
              display: none;
          }
          .icon--offsite {
              width: 163px;
              height: 81px;
              background-image: url(//cdn.shopify.com/s/assets/checkout/offsite-908d79d8d532f6af67d7cc99244ede733729c29379c349ee015fbcea71fd8274.svg), none;
          }
          .blank-slate {
              padding-left: 4.5em;
              padding-right: 4.5em;
          }
      }
      @media (max-width: 749px){
          .main {
              padding-top: 1.5em;
          }
          .visually-hidden-on-mobile {
              border: 0;
              clip: rect(0 0 0 0);
              width: 2px;
              height: 2px;
              margin: -2px;
              overflow: hidden;
              padding: 0;
              position: absolute;
          }
          .btn, .sp-modal-toggle {
              width: 100%;
              padding-top: 1.75em;
              padding-bottom: 1.75em;
          }
          .step__footer__previous-link, .step__footer__info {
              padding-top: 1.5em;
              text-align: center;
          }
          .main__content {
              padding-bottom: 1.5em;
          }
      }
    </style>
  </head>

  <body class="prestige--v3 {% if template.directory %}template-{{ template.directory | handle }}{% endif %} template-{{ template.name | handle }}">
      <div class="LoadingBar"></div>
      <div id="Search" class="hide"><input type="text" name="q"/></div>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQWTCTX"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <a class="PageSkipLink u-visually-hidden" href="#main">{{ 'header.navigation.skip_to_content' | t }}</a>
    {% comment %} ** BEGIN CUSTOMER SHIPPING RULES ** {% endcomment %}
    {% comment %} -- This code was automatically added by the Customer Shipping Rules App {% endcomment %}
    {% comment %} -- See https://customershippingrules.com for more info {% endcomment %}
    {% include 'customer-shipping-rules-theme' %}
    {% comment %} ** END CUSTOMER SHIPPING RULES ** {% endcomment %}

    {% include 'social-login' %}{% include 'booster-discounts' %}

    {% include 'special-offers' %}
    {{ 'bold-custom.css' | asset_url | stylesheet_tag }}

    {% include 'scm-bannerslider' %}

    {% render 'preorder-now' %}
    {% include 'easyvideo' %}
    {% include 'magisto' %}

    {% include 'shopideo' %}
    {% include 'smile-initializer' %}    


    <!-- Back in Stock helper snippet -->
    {% render 'back-in-stock-helper' %}
    <!-- End Back in Stock helper snippet -->

    {% include 'swymSnippet' %}

    {% include 'mw_fees_objects' %}
    {% include "bc_banner" %}

    <header class="banner" data-header="" role="banner">
      <div class="wrap">
        {%- if settings.Logo_image != blank -%}
        <a class="logo logo--center" href="{{ settings.url_image }}">
          <img alt="{{ shop.name }}" class="logo__image logo__image--large" src="{{settings.Logo_image | img_url: 'master'}}">
        </a>
        {% endif %} 
        <h1 class="visually-hidden">
          Información
        </h1>
      </div>
    </header>
    
    <aside role="complementary">
      <button class="order-summary-toggle order-summary-toggle--show shown-if-js" data-trekkie-id="order_summary_toggle" aria-expanded="false" aria-controls="order-summary" data-drawer-toggle="[data-order-summary]">
        <span class="wrap">
          <span class="order-summary-toggle__inner">
            <span class="order-summary-toggle__icon-wrapper">
              <svg width="20" height="19" xmlns="http://www.w3.org/2000/svg" class="order-summary-toggle__icon"><path d="M17.178 13.088H5.453c-.454 0-.91-.364-.91-.818L3.727 1.818H0V0h4.544c.455 0 .91.364.91.818l.09 1.272h13.45c.274 0 .547.09.73.364.18.182.27.454.18.727l-1.817 9.18c-.09.455-.455.728-.91.728zM6.27 11.27h10.09l1.454-7.362H5.634l.637 7.362zm.092 7.715c1.004 0 1.818-.813 1.818-1.817s-.814-1.818-1.818-1.818-1.818.814-1.818 1.818.814 1.817 1.818 1.817zm9.18 0c1.004 0 1.817-.813 1.817-1.817s-.814-1.818-1.818-1.818-1.818.814-1.818 1.818.814 1.817 1.818 1.817z"></path>
              </svg>
            </span>
            <span class="order-summary-toggle__text order-summary-toggle__text--show">
              <span>Mostrar resumen del pedido</span>
              <svg width="11" height="6" xmlns="http://www.w3.org/2000/svg" class="order-summary-toggle__dropdown" fill="#000"><path d="M.504 1.813l4.358 3.845.496.438.496-.438 4.642-4.096L9.504.438 4.862 4.534h.992L1.496.69.504 1.812z"></path></svg>
            </span>
            <span class="order-summary-toggle__text order-summary-toggle__text--hide">
              <span>Ocultar resumen del pedido</span>
              <svg width="11" height="7" xmlns="http://www.w3.org/2000/svg" class="order-summary-toggle__dropdown" fill="#000"><path d="M6.138.876L5.642.438l-.496.438L.504 4.972l.992 1.124L6.138 2l-.496.436 3.862 3.408.992-1.122L6.138.876z"></path></svg>
            </span>
            <span class="order-summary-toggle__total-recap total-recap" data-order-summary-section="toggle-total-recap">
              <span class="total-recap__final-price total-recap__calc-price" data-checkout-payment-due-target="{{ cart.total_price }}">{{ cart.total_price | money }}</span>
            </span>
          </span>
        </span>
      </button>
    </aside>
    
    <div class="content" data-content="">
      <div class="wrap">
        <div class="main">
          <header class="main__header" role="banner">
            {%- if settings.Logo_image != blank -%}
            <a class="logo logo--center" href="{{ settings.url_image }}">
              <img alt="{{ shop.name }}" class="logo__image logo__image--large" src="{{settings.Logo_image | img_url: 'master'}}">
            </a>
            {% endif %} 
            <h1 class="visually-hidden">
              Información
            </h1>
            <nav aria-label="Ruta de navegación" {% if request.path contains '/500' %}class="hide"{% endif %}>
              <ul id="breadcrumbCheckout" class="breadcrumb breadcrumb--center">
                <li class="breadcrumb__item breadcrumb__item--completed">
                  <a class="breadcrumb__link" href="{{ shop.url }}/cart">Carrito</a>
                  <svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-10 breadcrumb__chevron-icon" aria-hidden="true" focusable="false"> <use xlink:href="#chevron-right"></use> </svg>
                </li>
                <li class="breadcrumb__item breadcrumb__item--current" aria-current="step">
                  <span class="breadcrumb__text">Información</span>
                  <svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-10 breadcrumb__chevron-icon" aria-hidden="true" focusable="false"> <use xlink:href="#chevron-right"></use> </svg>
                </li>
                <li class="breadcrumb__item">
                  <a class="breadcrumb__link" href="/21586182208/checkouts/1d04d77998d014a97cb0c5c0902c5a3a?step=shipping_method">Envíos</a>
                  <svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-10 breadcrumb__chevron-icon" aria-hidden="true" focusable="false"> <use xlink:href="#chevron-right"></use> </svg>
                </li>
                <li class="breadcrumb__item">
                  <span class="breadcrumb__text">Pago</span>
                </li>
              </ul>
            </nav>
          </header>
          {% if request.path contains '/500' %}
          <div class="EmptyState" style="margin: 120px 0;">
            <div class="Container">
              <h3 class="EmptyState__Title Heading u-h5" style="text-align: center;">500</h3>
              <p class="EmptyState__Description Text--subdued">Lo sentimos, no se ha podido procesar</p>
              <a href="javascript:void(0);" class="EmptyState__Action Button Button--primary return_checkout_500" style="min-width:80%;">Intentar nuevamente</a>
              <br>
              <a href="/cart" class="EmptyState__Action Button Button--primary" style="min-width:80%;">Volver al carrito</a>
            </div>
          </div>
          {% endif %}
          <main class="main__content {% if request.path contains '/500' %}hide{% endif %}" role="main">
            
            <div id="dataStep_1" class="step" data-step="contact_information" data-last-step="false">
              <form class="edit_checkout animate-floating-labels" data-customer-information-form="true" data-email-or-phone="false" action="#" accept-charset="UTF-8" method="post">               
                <input type="hidden" name="previous_step" id="previous_step1" value="contact_information">
                <input type="hidden" name="step" value="shipping_method">
                <div class="step__sections">
                  <div class="section section--contact-information">
                    <div class="section__header">
                      <div class="layout-flex layout-flex--tight-vertical layout-flex--loose-horizontal layout-flex--wrap">
                        <h2 class="section__title layout-flex__item layout-flex__item--stretch" id="main-header" tabindex="-1">Información de contacto</h2>
                        {% if shop.customer_accounts_enabled %}
                          {% unless customer %}
                            <p class="layout-flex__item">
                            <span aria-hidden="true">¿Ya tienes una cuenta?</span>
                            <a href="javascript:void(0);" class="abrir-sesion-store">
                                <span class="visually-hidden">¿Ya tienes una cuenta?</span>
                                Iniciar sesión
                            </a>        
                            </p>
                         {% endunless %}
                        {% endif %}
                      </div>
                    </div>
                    <div class="section__content" data-section="customer-information" data-shopify-pay-validate-on-load="false">
                      <div class="fieldset {% if customer %}hidden{% endif %}">
                        <div data-shopify-pay-email-flow="false" class="field field--required field--show-floating-label">
                          <div class="field__input-wrapper">                            
                            <input placeholder="Correo electrónico" autocapitalize="off" spellcheck="false" autocomplete="shipping email" data-autofocus="true" data-backup="customer_email" aria-describedby="checkout-context-step-one error-for-email" aria-required="true" class="field__input" size="30" maxlength="255" type="email" value="{% if customer %}{{ customer.email }}{% endif %}" name="checkout[email]" id="checkout_email">
                          </div>
                        </div>
                      </div>
                      {% if customer %}
                        <div class="logged-in-customer-information">
                            <div class="logged-in-customer-information__avatar-wrapper">
                                <div class="logged-in-customer-information__avatar gravatar" style="background-image: url(//proxy.shopifycdn.com/9ef19c078cd2c521215342406184f12f3c12b10c42fd89e9022b83adeaebfb3e/www.gravatar.com/avatar/4c2c9465b8e4b78dd0113aead9ff2b38.jpg?s=100&amp;d=https%3A%2F%2Fcdn.shopify.com%2Fs%2Fassets%2Fno-gravatar-new-04e7c2331218ac202e79e31be502fd5631bc96cb0206580dbcb0720ebbbd7c73_100x100.png);filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//proxy.shopifycdn.com/9ef19c078cd2c521215342406184f12f3c12b10c42fd89e9022b83adeaebfb3e/www.gravatar.com/avatar/4c2c9465b8e4b78dd0113aead9ff2b38.jpg?s=100&amp;d=https%3A%2F%2Fcdn.shopify.com%2Fs%2Fassets%2Fno-gravatar-new-04e7c2331218ac202e79e31be502fd5631bc96cb0206580dbcb0720ebbbd7c73_100x100.png', sizingMethod='scale')" role="img" aria-label="Avatar"></div>
                            </div>
                            <p class="logged-in-customer-information__paragraph">
                                <span class="page-main__emphasis">{{ customer.name }}</span>
                                <span data-rtl-ensure="">({{ customer.email }})</span>
                                <br>
                                <a href="javascript:void(0);" class="cerrar-sesion-store">Cerrar la sesión</a>
                            </p>
                        </div>
                      {% endif %}
                      <div class="fieldset-description" data-buyer-accepts-marketing="">
                        <div class="section__content">
                          <div class="checkbox-wrapper">
                            <div class="checkbox__input">
                              <input name="checkout[buyer_accepts_marketing]" type="hidden" value="0" />
                              <input class="input-checkbox" data-backup="buyer_accepts_marketing" type="checkbox" value="1" name="checkout[buyer_accepts_marketing]" id="checkout_buyer_accepts_marketing" {% if customer %}{% if customer.accepts_marketing %}checked{% endif %}{% endif %} />
                            </div>
                            <label class="checkbox__label" for="checkout_buyer_accepts_marketing">Quiero recibir noticias y ofertas exclusivas</label>
                          </div>
                        </div>
                      </div>
                    </div> 
                  </div> 
                  <div class="section section--shipping-address" data-shipping-address="">
                    <div class="section__header">
                      <h2 class="section__title">Dirección de envío</h2>
                    </div>
                    <div class="section__content">
                      <div class="fieldset">
                        <div class="address-fields" data-address-fields="">
                            <div class="field field--required {% unless customer %}hide{% endunless %}">
                                <div class="field__input-wrapper field__input-wrapper--select"><label class="field__label field__label--visible" for="checkout_shipping_address_id">Direcciones guardadas</label>
                                <select data-address-selector="" data-field-name-format="checkout[shipping_address][%s]" data-backup="contact_stored_addresses" class="field__input field__input--select" aria-required="true" name="checkout[shipping_address][id]" id="checkout_shipping_address_id">
                                    {% if customer %}
                                    {% for address in customer.addresses %}
                                    <option 
                                        data-properties='{{ address | json }}' 
                                        value="{{ address.id }}">{{ address.street }}, {{ address.zip }} {{ address.city }}, {{ address.province }}, {{ address.country }} ({{ address.first_name }} {{ address.last_name }})</option>
                                    {% endfor %}
                                    {% endif %}
                                    <option value="">Usa una nueva dirección</option></select>
                                    <div class="field__caret">
                                        <svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-10 field__caret-svg" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#caret-down"></use></svg>
                                    </div>
                                </div>
                            </div>
                          <div class="field field--required field--half field--show-floating-label" data-address-field="first_name">
                            <div class="field__input-wrapper">                              
                              <input placeholder="Nombre" autocomplete="shipping given-name" autocorrect="off" data-backup="first_name" class="field__input" aria-required="true" size="30" maxlength="30" type="text" value="{% if customer %}{{ customer.addresses[0].first_name }}{% endif %}" name="checkout[shipping_address][first_name]" id="checkout_shipping_address_first_name" />
                            </div>
                          </div>
                          <div class="field field--required field--half field--show-floating-label" data-address-field="last_name">
                            <div class="field__input-wrapper">                            
                              <input placeholder="Apellido" autocomplete="shipping family-name" autocorrect="off" data-backup="last_name" class="field__input" aria-required="true" size="60" maxlength="60" type="text" value="{% if customer %}{{ customer.addresses[0].last_name }}{% endif %}" name="checkout[shipping_address][last_name]" id="checkout_shipping_address_last_name">
                            </div>
                          </div>
                          <div data-address-field="company" data-autocomplete-field-container="true" class="field field--optional">
                            <div class="field__input-wrapper">                            
                              <input placeholder="Empresa (opcional)" autocomplete="shipping organization" autocorrect="off" data-backup="company" class="field__input" size="45" maxlength="45" type="text" value="{% if customer %}{{ customer.addresses[0].company }}{% endif %}" name="checkout[shipping_address][company]" id="checkout_shipping_address_company">
                            </div>
                          </div>
                          <div data-address-field="address1" data-autocomplete-field-container="true" class="field field--required field--show-floating-label">
                            <div class="field__input-wrapper">                            
                              <input placeholder="Calle y número de casa" autocomplete="shipping address-line1" autocorrect="off" data-backup="address1" class="field__input" aria-required="true" size="100" maxlength="100" type="text" value="{% if customer %}{{ customer.addresses[0].address1 }}{% endif %}" name="checkout[shipping_address][address1]" id="checkout_shipping_address_address1">
                              <p class="field__additional-info visually-hidden" data-address-civic-number-warning="">
                                <svg class="icon-svg icon-svg--size-16 field__message__icon" aria-hidden="true" focusable="false"> <use xlink:href="#info"></use> </svg>
                                Agrega un número de domicilio si lo tienes
                              </p>
                            </div>
                          </div>
                          <div data-address-field="address2" data-autocomplete-field-container="true" class="field field--required field--show-floating-label">
                            <div class="field__input-wrapper">                            
                              <input placeholder="DNI/CIF" autocomplete="shipping address-line2" autocorrect="off" data-backup="address2" class="field__input" aria-required="true" size="100" maxlength="100" type="text" value="{% if customer %}{{ customer.addresses[0].address2 }}{% endif %}" name="checkout[shipping_address][address2]" id="checkout_shipping_address_address2">
                            </div>
                          </div>
                          <div class="field field--required field--third field--show-floating-label" data-address-field="zip" data-autocomplete-field-container="true">
                            <div class="field__input-wrapper">                            
                              <input placeholder="Código postal" autocomplete="shipping postal-code" autocorrect="off" data-backup="zip" class="field__input field__input--zip" aria-required="true" size="6" maxlength="6" type="text" value="{% if customer %}{{ customer.addresses[0].zip }}{% endif %}" name="checkout[shipping_address][zip]" id="checkout_shipping_address_zip">
                            </div>
                          </div>
                          <div data-address-field="city" data-autocomplete-field-container="true" class="field field--required field--third field--show-floating-label">
                            <div class="field__input-wrapper">                            
                              <input placeholder="Ciudad" autocomplete="shipping address-level2" autocorrect="off" data-backup="city" class="field__input" aria-required="true" size="30" maxlength="30" type="text" value="{% if customer %}{{ customer.addresses[0].city }}{% endif %}" name="checkout[shipping_address][city]" id="checkout_shipping_address_city">
                            </div>
                          </div>
                          {% assign provCode = '' %}
                          {% if customer %}
                          {% assign provCode =  customer.addresses[0].province_code %}
                          {% endif %}
                          <div class="field field--required field--show-floating-label field--third" data-address-field="province" data-autocomplete-field-container="true">
                            <div class="field__input-wrapper field__input-wrapper--select">                            
                              <select placeholder="Provincia" autocomplete="shipping address-level1" autocorrect="off" data-backup="province" class="field__input field__input--select" aria-required="true" name="checkout[shipping_address][province]" id="checkout_shipping_address_province">
                                <option disabled="">Provincia</option>
                                <option {% if provCode == 'C' %}selected{% endif %} data-alternate-values="[&quot;A Coruña&quot;,&quot;A Coruna&quot;]" value="C">A Coruña</option>
                                <option {% if provCode == 'VI' %}selected{% endif %} data-alternate-values="[&quot;Álava&quot;,&quot;Alava&quot;]" value="VI">Álava</option>
                                <option {% if provCode == 'AB' %}selected{% endif %} data-alternate-values="[&quot;Albacete&quot;]" value="AB">Albacete</option>
                                <option {% if provCode == 'A' %}selected{% endif %} data-alternate-values="[&quot;Alicante&quot;]" value="A">Alicante</option>
                                <option {% if provCode == 'AL' %}selected{% endif %} data-alternate-values="[&quot;Almería&quot;,&quot;Almeria&quot;]" value="AL">Almería</option>
                                <option {% if provCode == 'O' %}selected{% endif %} data-alternate-values="[&quot;Asturias&quot;]" value="O">Asturias</option>
                                <option {% if provCode == 'AV' %}selected{% endif %} data-alternate-values="[&quot;Ávila&quot;,&quot;Avila&quot;]" value="AV">Ávila</option>
                                <option {% if provCode == 'BA' %}selected{% endif %} data-alternate-values="[&quot;Badajoz&quot;]" value="BA">Badajoz</option>
                                <option {% if provCode == 'PM' %}selected{% endif %} data-alternate-values="[&quot;Balears&quot;,&quot;Baleares&quot;]" value="PM">Balears</option>
                                <option {% if provCode == 'B' %}selected{% endif %} data-alternate-values="[&quot;Barcelona&quot;]" value="B">Barcelona</option>
                                <option {% if provCode == 'BU' %}selected{% endif %} data-alternate-values="[&quot;Burgos&quot;]" value="BU">Burgos</option>
                                <option {% if provCode == 'CC' %}selected{% endif %} data-alternate-values="[&quot;Cáceres&quot;,&quot;Caceres&quot;]" value="CC">Cáceres</option>
                                <option {% if provCode == 'CA' %}selected{% endif %} data-alternate-values="[&quot;Cádiz&quot;,&quot;Cadiz&quot;]" value="CA">Cádiz</option>
                                <option {% if provCode == 'S' %}selected{% endif %} data-alternate-values="[&quot;Cantabria&quot;]" value="S">Cantabria</option>
                                <option {% if provCode == 'CS' %}selected{% endif %} data-alternate-values="[&quot;Castellón&quot;,&quot;Castellon&quot;,&quot;Castelló&quot;,&quot;Castello&quot;]" value="CS">Castellón</option>
                                <option {% if provCode == 'CE' %}selected{% endif %} data-alternate-values="[&quot;Ceuta&quot;]" value="CE">Ceuta</option>
                                <option {% if provCode == 'CR' %}selected{% endif %} data-alternate-values="[&quot;Ciudad Real&quot;]" value="CR">Ciudad Real</option>
                                <option {% if provCode == 'CO' %}selected{% endif %} data-alternate-values="[&quot;Córdoba&quot;,&quot;Cordoba&quot;,&quot;Cordova&quot;]" value="CO">Córdoba</option>
                                <option {% if provCode == 'CU' %}selected{% endif %} data-alternate-values="[&quot;Cuenca&quot;]" value="CU">Cuenca</option>
                                <option {% if provCode == 'GI' %}selected{% endif %} data-alternate-values="[&quot;Girona&quot;,&quot;Gerona&quot;]" value="GI">Girona</option>
                                <option {% if provCode == 'GR' %}selected{% endif %} data-alternate-values="[&quot;Granada&quot;]" value="GR">Granada</option>
                                <option {% if provCode == 'GU' %}selected{% endif %} data-alternate-values="[&quot;Guadalajara&quot;]" value="GU">Guadalajara</option>
                                <option {% if provCode == 'SS' %}selected{% endif %} data-alternate-values="[&quot;Guipúzcoa&quot;,&quot;Guipuzcoa&quot;,&quot;Gipuzkoa&quot;]" value="SS">Guipúzcoa</option>
                                <option {% if provCode == 'H' %}selected{% endif %} data-alternate-values="[&quot;Huelva&quot;]" value="H">Huelva</option>
                                <option {% if provCode == 'HU' %}selected{% endif %} data-alternate-values="[&quot;Huesca&quot;,&quot;Uesca&quot;,&quot;Osca&quot;]" value="HU">Huesca</option>
                                <option {% if provCode == 'J' %}selected{% endif %} data-alternate-values="[&quot;Jaén&quot;,&quot;Jaen&quot;]" value="J">Jaén</option>
                                <option {% if provCode == 'LO' %}selected{% endif %} data-alternate-values="[&quot;La Rioja&quot;]" value="LO">La Rioja</option>
                                <option {% if provCode == 'GC' %}selected{% endif %} data-alternate-values="[&quot;Las Palmas&quot;]" value="GC">Las Palmas</option>
                                <option {% if provCode == 'LE' %}selected{% endif %} data-alternate-values="[&quot;León&quot;,&quot;Leon&quot;]" value="LE">León</option>
                                <option {% if provCode == 'L' %}selected{% endif %} data-alternate-values="[&quot;Lleida&quot;,&quot;Lérida&quot;,&quot;Lerida&quot;]" value="L">Lleida</option>
                                <option {% if provCode == 'LU' %}selected{% endif %} data-alternate-values="[&quot;Lugo&quot;]" value="LU">Lugo</option>
                                <option {% if provCode == 'M' %}selected{% endif %} data-alternate-values="[&quot;Madrid&quot;]" value="M">Madrid</option>
                                <option {% if provCode == 'MA' %}selected{% endif %} data-alternate-values="[&quot;Málaga&quot;,&quot;Malaga&quot;]" value="MA">Málaga</option>
                                <option {% if provCode == 'ML' %}selected{% endif %} data-alternate-values="[&quot;Melilla&quot;]" value="ML">Melilla</option>
                                <option {% if provCode == 'MU' %}selected{% endif %} data-alternate-values="[&quot;Murcia&quot;]" value="MU">Murcia</option>
                                <option {% if provCode == 'NA' %}selected{% endif %} data-alternate-values="[&quot;Navarra&quot;,&quot;Nafarroa&quot;,&quot;Navarre&quot;]" value="NA">Navarra</option>
                                <option {% if provCode == 'OR' %}selected{% endif %} data-alternate-values="[&quot;Ourense&quot;]" value="OR">Ourense</option>
                                <option {% if provCode == 'P' %}selected{% endif %} data-alternate-values="[&quot;Palencia&quot;]" value="P">Palencia</option>
                                <option {% if provCode == 'PO' %}selected{% endif %} data-alternate-values="[&quot;Pontevedra&quot;]" value="PO">Pontevedra</option>
                                <option {% if provCode == 'SA' %}selected{% endif %} data-alternate-values="[&quot;Salamanca&quot;]" value="SA">Salamanca</option>
                                <option {% if provCode == 'TF' %}selected{% endif %} data-alternate-values="[&quot;Santa Cruz de Tenerife&quot;,&quot;Santa Cruz&quot;]" value="TF">Santa Cruz de Tenerife</option>
                                <option {% if provCode == 'SG' %}selected{% endif %} data-alternate-values="[&quot;Segovia&quot;]" value="SG">Segovia</option>
                                <option {% if provCode == 'SE' %}selected{% endif %} data-alternate-values="[&quot;Sevilla&quot;,&quot;Seville&quot;]" value="SE">Sevilla</option>
                                <option {% if provCode == 'SO' %}selected{% endif %} data-alternate-values="[&quot;Soria&quot;]" value="SO">Soria</option>
                                <option {% if provCode == 'T' %}selected{% endif %} data-alternate-values="[&quot;Tarragona&quot;]" value="T">Tarragona</option>
                                <option {% if provCode == 'TE' %}selected{% endif %} data-alternate-values="[&quot;Teruel&quot;]" value="TE">Teruel</option>
                                <option {% if provCode == 'TO' %}selected{% endif %} data-alternate-values="[&quot;Toledo&quot;]" value="TO">Toledo</option>
                                <option {% if provCode == 'V' %}selected{% endif %} data-alternate-values="[&quot;Valencia&quot;,&quot;València&quot;]" value="V">Valencia</option>
                                <option {% if provCode == 'VA' %}selected{% endif %} data-alternate-values="[&quot;Valladolid&quot;]" value="VA">Valladolid</option>
                                <option {% if provCode == 'BI' %}selected{% endif %} data-alternate-values="[&quot;Vizcaya&quot;,&quot;Biscay&quot;,&quot;Bizkaia&quot;]" value="BI">Vizcaya</option>
                                <option {% if provCode == 'ZA' %}selected{% endif %} data-alternate-values="[&quot;Zamora&quot;]" value="ZA">Zamora</option>
                                <option {% if provCode == 'Z' %}selected{% endif %} data-alternate-values="[&quot;Zaragoza&quot;,&quot;Saragossa&quot;]" value="Z">Zaragoza</option>
                              </select>
                              <div class="field__caret shown-if-js">
                                <svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-10 field__caret-svg" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#caret-down"></use> </svg>
                              </div>
                            </div>
                          </div>
                          <div class="field field--required field--show-floating-label" data-address-field="country" data-autocomplete-field-container="true">
                            <div class="field__input-wrapper field__input-wrapper--select">                            
                              <select size="1" autocomplete="shipping country" data-backup="country" class="field__input field__input--select" aria-required="true" name="checkout[shipping_address][country]" id="checkout_shipping_address_country" placeholder="País/región">
                                <option data-code="ES" selected="selected" value="Spain">España</option></select>
                              <div class="field__caret">
                                <svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-10 field__caret-svg" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#caret-down"></use> </svg>
                              </div>
                            </div>
                          </div>
                          <div data-address-field="phone" class="field field--required field--show-floating-label">
                            <div class="field__input-wrapper field__input-wrapper--icon-right">                              
                              <input placeholder="Teléfono" autocomplete="shipping tel" autocorrect="off" data-backup="phone" data-phone-formatter="true" data-phone-formatter-country-select="[name='checkout[shipping_address][country]']" aria-describedby="tooltip-for-phone" aria-required="true" class="field__input field__input--numeric" size="30" maxlength="20" type="tel" value="{% if customer %}{{ customer.addresses[0].phone }}{% endif %}" name="checkout[shipping_address][phone]" id="checkout_shipping_address_phone" data-phone-formatter-country-code="34">
                              <div class="field__icon">
                                <div id="phone_tooltip" class="tooltip-container">
                                  <button type="button" class="tooltip-control" data-tooltip-control="true" aria-label="Más información" aria-describedby="tooltip-for-phone" aria-controls="tooltip-for-phone" aria-pressed="false" placeholder="Teléfono"><svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-16 icon-svg--block icon-svg--center" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#question"></use> </svg></button><span class="tooltip" role="tooltip" id="tooltip-for-phone">En caso de que tengamos que contactarte sobre tu pedido.</span></div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="field {% if customer %}hidden{% endif %}">
                          <div class="checkbox-wrapper">
                            <div class="checkbox__input">
                              <input size="30" type="hidden" value="false" name="checkout[remember_me]">
                              <input name="checkout[remember_me]" type="hidden" value="0">
                              <input class="input-checkbox" data-backup="remember_me" type="checkbox" value="1" name="checkout[remember_me]" id="checkout_remember_me">
                            </div>
                            <label class="checkbox__label" for="checkout_remember_me">
                              Guardar mi información y consultar más rápidamente la próxima vez
                            </label>      
                          </div>
                        </div>
                      </div> 
                    </div> 
                  </div>
                </div>
                <div class="step__footer" data-step-footer="">
                  <button name="button" type="submit" id="continue_button1" class="step__footer__continue-btn btn continue_button_steps" aria-busy="false" trekkie_id="continue_to_shipping_method_button" data-step="1" data-processing="0">
                    <span class="btn__content" data-continue-button-content="true">Continuar con envíos</span>
                    <svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg>
                  </button>
                  <a class="step__footer__previous-link" data-trekkie-id="previous_step_link" href="{{ shop.url }}/cart">
                    <svg focusable="false" aria-hidden="true" class="icon-svg icon-svg--color-accent icon-svg--size-10 previous-link__icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M8 1L7 0 3 4 2 5l1 1 4 4 1-1-4-4"></path></svg>
                    <span class="step__footer__previous-link-content">Volver al carrito</span>
                  </a>
                </div>
                <input type="hidden" name="checkout[client_details][browser_width]" id="checkout_client_details_browser_width" value="1519">
                <input type="hidden" name="checkout[client_details][browser_height]" id="checkout_client_details_browser_height" value="754">
                <input type="hidden" name="checkout[client_details][javascript_enabled]" id="checkout_client_details_javascript_enabled" value="1">
                <input type="hidden" name="checkout[client_details][color_depth]" id="checkout_client_details_color_depth" value="24">
                <input type="hidden" name="checkout[client_details][java_enabled]" id="checkout_client_details_java_enabled" value="false">
                <input type="hidden" name="checkout[client_details][browser_tz]" id="checkout_client_details_browser_tz" value="300">
                <input type="hidden" name="checkout[customer][id]" id="checkout_customer_id" value="{% if customer %}{{ customer.id }}{% else %}0{% endif %}">
              </form>
            </div>
            <div id="dataStep_2" class="step hidden" data-step="shipping_method" data-last-step="false">
              <form class="edit_checkout" data-shipping-method-form="true" data-ignore-floating-label="true" action="/21586182208/checkouts/1d04d77998d014a97cb0c5c0902c5a3a" accept-charset="UTF-8" method="post">                                
                <input type="hidden" name="previous_step" id="previous_step2" value="shipping_method">
                <input type="hidden" name="step" value="payment_method">
                <div class="step__sections">
                  <div class="section">
                    <div class="content-box">
                      <div role="table" class="content-box__row content-box__row--tight-spacing-vertical">
                        <div role="row" class="review-block">
                          <div class="review-block__inner">
                            <div role="rowheader" class="review-block__label">Contacto</div>
                            <div role="cell" class="review-block__content">
                              <bdo dir="ltr" class="rw_checkout_email"></bdo>
                            </div>
                          </div>
                          <div role="cell" class="review-block__link">
                            <a class="link--small return_checkout_email" href="javascript:void(0);">
                              <span aria-hidden="true">Cambiar</span>
                              <span class="visually-hidden">Cambiar información de contacto</span>
                            </a>    
                          </div>
                        </div>
                        <div role="row" class="review-block">
                          <div class="review-block__inner">
                            <div role="rowheader" class="review-block__label">Enviar a</div>
                            <div role="cell" class="review-block__content">
                              <address class="address address--tight rw_address1"></address>
                            </div>
                          </div>
                          <div role="cell" class="review-block__link">
                            <a class="link--small return_checkout_email" href="javascript:void(0);">
                              <span aria-hidden="true">Cambiar</span>
                              <span class="visually-hidden">Cambiar dirección de envío</span>
                            </a>      
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="section section--shipping-method">
                    <div class="section__header">
                      <h2 class="section__title" id="main-header" tabindex="-1">Envíos</h2>
                    </div>
                    <div class="section__content">
                      <noscript>
                        <meta http-equiv="refresh" content="1; url=?step=shipping_method">
                      </noscript>
                      <fieldset class="content-box" data-shipping-methods="" id="dataShippingBlock">
                        <legend class="visually-hidden">Selecciona un método de envío</legend>
                      </fieldset>
                    </div>
                  </div>
                </div>
                <div class="step__footer" data-step-footer="">
                  <button name="button" type="button" id="continue_button2" class="step__footer__continue-btn btn continue_button_steps" trekkie_id="continue_to_payment_method_button" aria-busy="false" data-step="2" data-processing="0">
                    <span class="btn__content" data-continue-button-content="true">Continuar con el pago</span>
                    <svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg></button>
                  <a class="step__footer__previous-link previous_button_steps" data-step="2" data-processing="0" href="javascript:void();">
                    <svg focusable="false" aria-hidden="true" class="icon-svg icon-svg--color-accent icon-svg--size-10 previous-link__icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M8 1L7 0 3 4 2 5l1 1 4 4 1-1-4-4"></path></svg>
                    <span class="step__footer__previous-link-content">Volver a información</span>
                  </a>
                </div>
              </form>
            </div>                        
            
            <div id="dataStep_3" class="step hidden" data-step="payment_method" data-last-step="false">
              <div class="step__sections">
                <div class="section">
                  <div class="content-box">
                    <div role="table" class="content-box__row content-box__row--tight-spacing-vertical">
                      <div role="row" class="review-block">
                        <div class="review-block__inner">
                          <div role="rowheader" class="review-block__label">Contacto</div>
                          <div role="cell" class="review-block__content">
                            <bdo dir="ltr" class="rw_checkout_email"></bdo>
                          </div>
                        </div>
                        <div role="cell" class="review-block__link">
                          <a class="link--small return_checkout_email" href="javascript:void(0);">
                            <span aria-hidden="true">Cambiar</span>
                            <span class="visually-hidden">Cambiar información de contacto</span>
                          </a>    
                        </div>
                      </div>
                      <div role="row" class="review-block">
                        <div class="review-block__inner">
                          <div role="rowheader" class="review-block__label">Enviar a</div>
                          <div role="cell" class="review-block__content">
                            <address class="address address--tight rw_address1"></address>
                          </div>
                        </div>
                        <div role="cell" class="review-block__link">
                          <a class="link--small return_checkout_email" href="javascript:void(0);">
                            <span aria-hidden="true">Cambiar</span>
                            <span class="visually-hidden">Cambiar dirección de envío</span>
                          </a>      
                        </div>
                      </div>
                      <div role="row" class="review-block">
                        <div class="review-block__inner">
                          <div role="rowheader" class="review-block__label">Método</div>
                          <div role="cell" class="review-block__content rw_checkout_shipping" data-review-section="shipping-cost">                          
                            <strong class="emphasis">
                              <span class="skeleton-while-loading--inline"></span>
                            </strong>
                          </div>
                        </div>
                        <div role="cell" class="review-block__link">
                          <a class="return_shipping_address" href="javascript:void(0);">
                            <span aria-hidden="true">Cambiar</span>
                            <span class="visually-hidden">Cambiar método de envío</span>
                          </a>    
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="section section--reductions hidden-on-desktop">
                  <div class="section__header">
                    <h2 class="section__title">Descuento</h2>
                  </div>
                  <div class="section__content">
                    <div data-reduction-form="">
                      <form class="edit_checkout animate-floating-labels" action="#" accept-charset="UTF-8" method="post">
                        <div class="fieldset">
                          <div class="field">                        
                            <div class="field__input-btn-wrapper">
                              <div class="field__input-wrapper">
                                <label class="field__label field__label--visible" for="checkout_reduction_code_mobile">Código de descuento</label>
                                <input placeholder="Código de descuento" class="field__input" id="checkout_reduction_code_mobile" data-discount-field="true" autocomplete="off" aria-required="true" size="30" type="text" name="checkout[reduction_code]">
                              </div>
                              <button name="button-desc" type="submit" class="field__input-btn btn btn--disabled" aria-busy="false" disabled="disabled" id="submit_discount_code_mobile">
                                <span class="btn__content visually-hidden-on-mobile" aria-hidden="true">Usar</span>
                                <span class="visually-hidden">
                                  Aplicar código de descuento
                                </span>
                                <svg class="icon-svg icon-svg--size-16 btn__icon shown-on-mobile" aria-hidden="true" focusable="false"> <use xlink:href="#arrow"></use> </svg>
                                <svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg>
                              </button>      
                            </div>
                          </div>
                        </div>
                        <div class="tags-list tag-discount-list"></div>
                      </form>
                    </div>
                  </div>
                </div>
                <form class="edit_checkout animate-floating-labels edit_checkout" data-payment-form="" action="#" accept-charset="UTF-8" method="post">
                  <input type="hidden" name="_method" value="patch">
                  <input type="hidden" name="authenticity_token" value="WwchliA0x4hpGSANJKPz3D0xBaqACPCakuT9GMhnX0WkEhNKy+ZH2Of6uiYPD4/2FFHy6bzOPOa7KVumolS7gA==">
                  <input type="hidden" name="previous_step" id="previous_step3" value="payment_method">
                  <input type="hidden" name="step">
                  <input type="hidden" name="s" id="s">

                  <main class="section section--payment-method main__content" data-payment-method="">
                    <div class="section__header">
                      <h2 class="section__title" id="main-header" tabindex="-1">Pago</h2>
                      <p class="section__text">Todas las transacciones son seguras y están encriptadas.</p>
                    </div>
                    <div class="section__content">
                      <div data-payment-subform="required">
                        <fieldset class="content-box">
                          <legend class="visually-hidden">Selecciona un método de pago</legend>
                          <div class="radio-wrapper content-box__row " data-gateway-group="offsite" data-gateway-name="offsite">
                            <div class="radio__input">
                              <input class="input-radio" id="pepper_payment" type="radio" value="pepper_payment" checked="checked" name="checkout[payment_gateway]" />
                            </div>
                            <div class="radio__label  ">
                              <label for="pepper_payment" class="radio__label__primary content-box__emphasis">
                                <span>Financiación con Pepper</span>
                              </label>
                            </div>
                          </div>
                          <div class="radio-wrapper content-box__row content-box__row--secondary secondary-pepper">
                            <div class="payment-method--pepper-container">
                              <table class="total-line-table hide">
                                <tr><td class="total-line__price payment-due"><span class="payment-due__price total-recap__calc-price--number">0</span></td><tr>
                              </table>
                              <div class="payment-method"></div>
                              <div class="payment-method"></div>
                              <div class="payment-method"></div>
                            </div>
                            <div class="blank-slate">
                              <i class="blank-slate__icon icon icon--offsite"></i>
                              <p class="shown-if-js">Luego de hacer clic en “Finalizar el pedido”, serás redirigido a Pepper para completar tu compra de forma segura.</p>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                  </main>

                  <div class="section section--billing-address" data-billing-address="">
                    <div class="section__header">
                      <h2 class="section__title">Dirección de facturación</h2>
                      <p class="section__text">
                        Selecciona la dirección que coincida con tu tarjeta o forma de pago.
                      </p>
                    </div>
                    <div class="section__content">
                      <fieldset class="content-box">
                        <legend class="visually-hidden">Selecciona una dirección de facturación</legend>
                        <div class="radio-wrapper content-box__row" data-same-billing-address="">
                          <div class="radio__input">
                            <input class="input-radio" data-backup="different_billing_address_false" type="radio" value="false" checked="checked" name="checkout[different_billing_address]" id="checkout_different_billing_address_false">
                          </div>
                          <label class="radio__label content-box__emphasis" for="checkout_different_billing_address_false">
                            La misma dirección de envío
                          </label>            
                        </div>
                        <div class="radio-wrapper content-box__row" data-different-billing-address="">
                          <div class="radio__input">
                            <input class="input-radio" data-backup="different_billing_address_true" aria-expanded="true" aria-controls="section--billing-address__different" type="radio" value="true" name="checkout[different_billing_address]" id="checkout_different_billing_address_true">
                          </div>
                          <label class="radio__label content-box__emphasis" for="checkout_different_billing_address_true">
                            Usar una dirección de facturación distinta
                          </label>           
                        </div>
                        <div class="radio-group__row content-box__row content-box__row--secondary hidden" id="section--billing-address__different">
                          <div class="fieldset">
                            <div class="address-fields" data-address-fields="">         
                              <div class="field field--required field--half" data-address-field="first_name">
                                <div class="field__input-wrapper">
                                  <label class="field__label field__label--visible" for="checkout_billing_address_first_name">Nombre</label>
                                  <input placeholder="Nombre" autocomplete="billing given-name" autocorrect="off" data-backup="first_name" class="field__input" aria-required="true" size="30" maxlength="30" type="text" value="{% if customer %}{{ customer.addresses[0].first_name }}{% endif %}" name="checkout[billing_address][first_name]" id="checkout_billing_address_first_name">
                                </div>
                              </div>
                              <div class="field field--required field--half" data-address-field="last_name">
                              <div class="field__input-wrapper">
                                <label class="field__label field__label--visible" for="checkout_billing_address_last_name">Apellido</label>
                                <input placeholder="Apellido" autocomplete="billing family-name" autocorrect="off" data-backup="last_name" class="field__input" aria-required="true" size="30" maxlength="60" type="text" value="{% if customer %}{{ customer.addresses[0].last_name }}{% endif %}" name="checkout[billing_address][last_name]" id="checkout_billing_address_last_name">
                              </div>
                              </div>
                              <div data-address-field="company" data-autocomplete-field-container="true" class="field field--optional">
                              <div class="field__input-wrapper">
                                <label class="field__label field__label--visible" for="checkout_billing_address_company">Empresa (opcional)</label>
                                <input placeholder="Empresa (opcional)" autocomplete="billing organization" autocorrect="off" data-backup="company" class="field__input" size="30" maxlength="45" type="text" value="{% if customer %}{{ customer.addresses[0].company }}{% endif %}" name="checkout[billing_address][company]" id="checkout_billing_address_company">
                              </div>
                              </div><div data-address-field="address1" data-autocomplete-field-container="true" class="field field--required">
                              <div class="field__input-wrapper">
                                <label class="field__label field__label--visible" for="checkout_billing_address_address1">Dirección</label>
                                <input placeholder="Dirección" autocomplete="billing address-line1" autocorrect="off" data-backup="address1" class="field__input" aria-required="true" size="30" maxlength="100" type="text" value="{% if customer %}{{ customer.addresses[0].address1 }}{% endif %}" name="checkout[billing_address][address1]" id="checkout_billing_address_address1" >
                                <p class="field__additional-info visually-hidden" data-address-civic-number-warning="">
                                  <svg class="icon-svg icon-svg--size-16 field__message__icon" aria-hidden="true" focusable="false"> <use xlink:href="#info"></use> </svg>
                                  Agrega un número de domicilio si lo tienes
                                </p>
                              </div>
                              </div>
                              <div data-address-field="address2" data-autocomplete-field-container="true" class="field field--required">
                                <div class="field__input-wrapper">
                                  <label class="field__label field__label--visible" for="checkout_billing_address_address2">DNI/CIF</label>
                                  <input placeholder="DNI/CIF" autocomplete="billing address-line2" autocorrect="off" data-backup="address2" class="field__input" aria-required="true" size="30" maxlength="100" type="text" value="{% if customer %}{{ customer.addresses[0].address2 }}{% endif %}" name="checkout[billing_address][address2]" id="checkout_billing_address_address2" >
                                </div>
                              </div>
                             
                              <div class="field field--required field--third field--show-floating-label" data-address-field="zip" data-autocomplete-field-container="true">
                                <div class="field__input-wrapper">
                                  <input placeholder="Código postal" autocomplete="billing postal-code" autocorrect="off" data-backup="zip" class="field__input field__input--zip" aria-required="true" size="30" maxlength="6" type="text" value="{% if customer %}{{ customer.addresses[0].zip }}{% endif %}" name="checkout[billing_address][zip]" id="checkout_billing_address_zip">
                                </div>
                              </div>
                              <div class="field field--required field--third field--show-floating-label" data-address-field="city" data-autocomplete-field-container="true">
                                <div class="field__input-wrapper">
                                  <input placeholder="Ciudad" autocomplete="billing address-level2" autocorrect="off" data-backup="city" class="field__input" aria-required="true" size="30" maxlength="30" type="text" value="{% if customer %}{{ customer.addresses[0].city }}{% endif %}" name="checkout[billing_address][city]" id="checkout_billing_address_city">
                                </div>
                              </div>
                              {% assign provCode = '' %}
                              {% if customer %}
                                {% assign provCode =  customer.addresses[0].province_code %}
                              {% endif %}

                              <div class="field field--required field--show-floating-label field--third" data-address-field="province" data-autocomplete-field-container="true">
                                <div class="field__input-wrapper field__input-wrapper--select">
                                  <select placeholder="Provincia" autocomplete="billing address-level1" autocorrect="off" data-backup="province" class="field__input field__input--select" aria-required="true" name="checkout[billing_address][province]" id="checkout_billing_address_province">
                                    <option disabled="">Provincia</option>
                                    <option {% if provCode == 'C' %}selected{% endif %} data-alternate-values="[&quot;A Coruña&quot;,&quot;A Coruna&quot;]" value="C">A Coruña</option>
                                    <option {% if provCode == 'VI' %}selected{% endif %} data-alternate-values="[&quot;Álava&quot;,&quot;Alava&quot;]" value="VI">Álava</option>
                                    <option {% if provCode == 'AB' %}selected{% endif %} data-alternate-values="[&quot;Albacete&quot;]" value="AB">Albacete</option>
                                    <option {% if provCode == 'A' %}selected{% endif %} data-alternate-values="[&quot;Alicante&quot;]" value="A">Alicante</option>
                                    <option {% if provCode == 'AL' %}selected{% endif %} data-alternate-values="[&quot;Almería&quot;,&quot;Almeria&quot;]" value="AL">Almería</option>
                                    <option {% if provCode == 'O' %}selected{% endif %} data-alternate-values="[&quot;Asturias&quot;]" value="O">Asturias</option>
                                    <option {% if provCode == 'AV' %}selected{% endif %} data-alternate-values="[&quot;Ávila&quot;,&quot;Avila&quot;]" value="AV">Ávila</option>
                                    <option {% if provCode == 'BA' %}selected{% endif %} data-alternate-values="[&quot;Badajoz&quot;]" value="BA">Badajoz</option>
                                    <option {% if provCode == 'PM' %}selected{% endif %} data-alternate-values="[&quot;Balears&quot;,&quot;Baleares&quot;]" value="PM">Balears</option>
                                    <option {% if provCode == 'B' %}selected{% endif %} data-alternate-values="[&quot;Barcelona&quot;]" value="B">Barcelona</option>
                                    <option {% if provCode == 'BU' %}selected{% endif %} data-alternate-values="[&quot;Burgos&quot;]" value="BU">Burgos</option>
                                    <option {% if provCode == 'CC' %}selected{% endif %} data-alternate-values="[&quot;Cáceres&quot;,&quot;Caceres&quot;]" value="CC">Cáceres</option>
                                    <option {% if provCode == 'CA' %}selected{% endif %} data-alternate-values="[&quot;Cádiz&quot;,&quot;Cadiz&quot;]" value="CA">Cádiz</option>
                                    <option {% if provCode == 'S' %}selected{% endif %} data-alternate-values="[&quot;Cantabria&quot;]" value="S">Cantabria</option>
                                    <option {% if provCode == 'CS' %}selected{% endif %} data-alternate-values="[&quot;Castellón&quot;,&quot;Castellon&quot;,&quot;Castelló&quot;,&quot;Castello&quot;]" value="CS">Castellón</option>
                                    <option {% if provCode == 'CE' %}selected{% endif %} data-alternate-values="[&quot;Ceuta&quot;]" value="CE">Ceuta</option>
                                    <option {% if provCode == 'CR' %}selected{% endif %} data-alternate-values="[&quot;Ciudad Real&quot;]" value="CR">Ciudad Real</option>
                                    <option {% if provCode == 'CO' %}selected{% endif %} data-alternate-values="[&quot;Córdoba&quot;,&quot;Cordoba&quot;,&quot;Cordova&quot;]" value="CO">Córdoba</option>
                                    <option {% if provCode == 'CU' %}selected{% endif %} data-alternate-values="[&quot;Cuenca&quot;]" value="CU">Cuenca</option>
                                    <option {% if provCode == 'GI' %}selected{% endif %} data-alternate-values="[&quot;Girona&quot;,&quot;Gerona&quot;]" value="GI">Girona</option>
                                    <option {% if provCode == 'GR' %}selected{% endif %} data-alternate-values="[&quot;Granada&quot;]" value="GR">Granada</option>
                                    <option {% if provCode == 'GU' %}selected{% endif %} data-alternate-values="[&quot;Guadalajara&quot;]" value="GU">Guadalajara</option>
                                    <option {% if provCode == 'SS' %}selected{% endif %} data-alternate-values="[&quot;Guipúzcoa&quot;,&quot;Guipuzcoa&quot;,&quot;Gipuzkoa&quot;]" value="SS">Guipúzcoa</option>
                                    <option {% if provCode == 'H' %}selected{% endif %} data-alternate-values="[&quot;Huelva&quot;]" value="H">Huelva</option>
                                    <option {% if provCode == 'HU' %}selected{% endif %} data-alternate-values="[&quot;Huesca&quot;,&quot;Uesca&quot;,&quot;Osca&quot;]" value="HU">Huesca</option>
                                    <option {% if provCode == 'J' %}selected{% endif %} data-alternate-values="[&quot;Jaén&quot;,&quot;Jaen&quot;]" value="J">Jaén</option>
                                    <option {% if provCode == 'LO' %}selected{% endif %} data-alternate-values="[&quot;La Rioja&quot;]" value="LO">La Rioja</option>
                                    <option {% if provCode == 'GC' %}selected{% endif %} data-alternate-values="[&quot;Las Palmas&quot;]" value="GC">Las Palmas</option>
                                    <option {% if provCode == 'LE' %}selected{% endif %} data-alternate-values="[&quot;León&quot;,&quot;Leon&quot;]" value="LE">León</option>
                                    <option {% if provCode == 'L' %}selected{% endif %} data-alternate-values="[&quot;Lleida&quot;,&quot;Lérida&quot;,&quot;Lerida&quot;]" value="L">Lleida</option>
                                    <option {% if provCode == 'LU' %}selected{% endif %} data-alternate-values="[&quot;Lugo&quot;]" value="LU">Lugo</option>
                                    <option {% if provCode == 'M' %}selected{% endif %} data-alternate-values="[&quot;Madrid&quot;]" value="M">Madrid</option>
                                    <option {% if provCode == 'MA' %}selected{% endif %} data-alternate-values="[&quot;Málaga&quot;,&quot;Malaga&quot;]" value="MA">Málaga</option>
                                    <option {% if provCode == 'ML' %}selected{% endif %} data-alternate-values="[&quot;Melilla&quot;]" value="ML">Melilla</option>
                                    <option {% if provCode == 'MU' %}selected{% endif %} data-alternate-values="[&quot;Murcia&quot;]" value="MU">Murcia</option>
                                    <option {% if provCode == 'NA' %}selected{% endif %} data-alternate-values="[&quot;Navarra&quot;,&quot;Nafarroa&quot;,&quot;Navarre&quot;]" value="NA">Navarra</option>
                                    <option {% if provCode == 'OR' %}selected{% endif %} data-alternate-values="[&quot;Ourense&quot;]" value="OR">Ourense</option>
                                    <option {% if provCode == 'P' %}selected{% endif %} data-alternate-values="[&quot;Palencia&quot;]" value="P">Palencia</option>
                                    <option {% if provCode == 'PO' %}selected{% endif %} data-alternate-values="[&quot;Pontevedra&quot;]" value="PO">Pontevedra</option>
                                    <option {% if provCode == 'SA' %}selected{% endif %} data-alternate-values="[&quot;Salamanca&quot;]" value="SA">Salamanca</option>
                                    <option {% if provCode == 'TF' %}selected{% endif %} data-alternate-values="[&quot;Santa Cruz de Tenerife&quot;,&quot;Santa Cruz&quot;]" value="TF">Santa Cruz de Tenerife</option>
                                    <option {% if provCode == 'SG' %}selected{% endif %} data-alternate-values="[&quot;Segovia&quot;]" value="SG">Segovia</option>
                                    <option {% if provCode == 'SE' %}selected{% endif %} data-alternate-values="[&quot;Sevilla&quot;,&quot;Seville&quot;]" value="SE">Sevilla</option>
                                    <option {% if provCode == 'SO' %}selected{% endif %} data-alternate-values="[&quot;Soria&quot;]" value="SO">Soria</option>
                                    <option {% if provCode == 'T' %}selected{% endif %} data-alternate-values="[&quot;Tarragona&quot;]" value="T">Tarragona</option>
                                    <option {% if provCode == 'TE' %}selected{% endif %} data-alternate-values="[&quot;Teruel&quot;]" value="TE">Teruel</option>
                                    <option {% if provCode == 'TO' %}selected{% endif %} data-alternate-values="[&quot;Toledo&quot;]" value="TO">Toledo</option>
                                    <option {% if provCode == 'V' %}selected{% endif %} data-alternate-values="[&quot;Valencia&quot;,&quot;València&quot;]" value="V">Valencia</option>
                                    <option {% if provCode == 'VA' %}selected{% endif %} data-alternate-values="[&quot;Valladolid&quot;]" value="VA">Valladolid</option>
                                    <option {% if provCode == 'BI' %}selected{% endif %} data-alternate-values="[&quot;Vizcaya&quot;,&quot;Biscay&quot;,&quot;Bizkaia&quot;]" value="BI">Vizcaya</option>
                                    <option {% if provCode == 'ZA' %}selected{% endif %} data-alternate-values="[&quot;Zamora&quot;]" value="ZA">Zamora</option>
                                    <option {% if provCode == 'Z' %}selected{% endif %} data-alternate-values="[&quot;Zaragoza&quot;,&quot;Saragossa&quot;]" value="Z">Zaragoza</option>
                                  </select>
                                  <div class="field__caret shown-if-js">
                                    <svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-10 field__caret-svg" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#caret-down"></use> </svg>
                                  </div>
                                </div>
                              </div>

                              <div class="field field--required field--show-floating-label" data-address-field="country" data-autocomplete-field-container="true">
                                <div class="field__input-wrapper field__input-wrapper--select">
                                    <select size="1" autocomplete="billing country" data-backup="country" class="field__input field__input--select" aria-required="true" name="checkout[billing_address][country]" id="checkout_billing_address_country" placeholder="País/región">
                                      <option data-code="ES" selected="selected" value="Spain">España</option>
                                    </select>
                                    <div class="field__caret">
                                      <svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-10 field__caret-svg" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#caret-down"></use> </svg>
                                    </div>
                                </div>
                              </div>

                              <div data-address-field="phone" class="field field--required field--show-floating-label">
                                <div class="field__input-wrapper field__input-wrapper--icon-right">
                                  <input placeholder="Teléfono" autocomplete="billing tel" autocorrect="off" data-backup="phone" data-phone-formatter="true" data-phone-formatter-country-select="[name='checkout[billing_address][country]']" aria-describedby="tooltip-for-phone" aria-required="true" class="field__input field__input--numeric" size="30" maxlength="20" type="tel" value="{% if customer %}{{ customer.addresses[0].phone }}{% endif %}" name="checkout[billing_address][phone]" id="checkout_billing_address_phone">
                                  <div class="field__icon">
                                    <div id="phone_tooltip" class="tooltip-container">
                                      <button type="button" class="tooltip-control" data-tooltip-control="true" aria-label="Más información" aria-describedby="tooltip-for-phone" aria-controls="tooltip-for-phone" aria-pressed="false" placeholder="Teléfono"><svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-16 icon-svg--block icon-svg--center" role="presentation" aria-hidden="true" focusable="false"> <use xlink:href="#question"></use> </svg></button>
                                      <span class="tooltip" role="tooltip" id="tooltip-for-phone">En caso de que tengamos que contactarte sobre tu pedido.</span>
                                    </div>
                                  </div>
                                </div>
                              </div>

                            </div>
                          </div>
                        </div>
                      </fieldset>
                    </div>
                  </div>
                  <div class="step__footer" data-step-footer="">
                    <input type="hidden" name="checkout[total_price]" id="checkout_total_price" value="93800">
                    <input type="hidden" name="complete" value="1">
                    <div class="shown-if-js">
                      <button name="button" type="submit" id="continue_button3" class="step__footer__continue-btn btn continue_button_steps" aria-busy="false" data-step="3" data-processing="0">
                        <span class="btn__content" data-continue-button-content="true">Finalizar el pedido</span>
                        <svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg></button>
                    </div>                    
                    <a class="step__footer__previous-link previous_button_steps" data-step="3" data-processing="0" href="javascript:void(0);">
                      <svg focusable="false" aria-hidden="true" class="icon-svg icon-svg--color-accent icon-svg--size-10 previous-link__icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M8 1L7 0 3 4 2 5l1 1 4 4 1-1-4-4"></path></svg>
                      <span class="step__footer__previous-link-content">Volver a envíos</span></a>
                  </div>
                </form>  
              </div>
            </div>                        
            <br />
            <br />
            <div class="button-help--whatsapp button-help--only-mobile">
              {%- if settings.text-checkout-cont != blank -%}
              {{ settings.text-checkout-cont }} 
              <a href="https://api.whatsapp.com/send?phone={{ settings.number-checkout-wsp }}" target="_blank">
                {{ settings.number-checkout-cont }}
              </a>
              {% endif %}
            </div>
          </main>
          <footer class="main__footer" role="contentinfo">
            <p class="copyright-text ">Todos los derechos reservados {{ shop.name }}</p>
          </footer>
        </div>
        <aside class="sidebar" role="complementary">      
          <div class="sidebar__content">
            <div id="order-summary" class="order-summary order-summary--is-collapsed" data-order-summary="">
              <h2 class="visually-hidden-if-js">Resumen del pedido</h2>
              <div class="order-summary__sections">
                <div class="order-summary__section order-summary__section--product-list {% if cart.items.size > 2 %}order-summary__section--has-scrollable{% endif %}">
                  <div class="order-summary__section__content">
                    <table class="product-table">
                      <caption class="visually-hidden">Carrito de compras</caption>
                      <thead class="product-table__header">
                        <tr>
                          <th scope="col"><span class="visually-hidden">Imagen del producto</span></th>
                          <th scope="col"><span class="visually-hidden">Descripción</span></th>
                          <th scope="col"><span class="visually-hidden">Cantidad</span></th>
                          <th scope="col"><span class="visually-hidden">Precio</span></th>
                        </tr>
                      </thead>
                      <tbody data-order-summary-section="line-items">
                        {% for item in cart.items %}
                        <tr class="product" data-product-id="{{ item.product.id }}" data-variant-id="{{ item.variant.id }}" data-product-type="{{ item.product.type }}" data-line-price="{{ item.line_price }}" data-customer-ready-visible="">
                          <td class="product__image">
                            <div class="product-thumbnail ">
                              <div class="product-thumbnail__wrapper">
                                <img alt="{{ item.title | escape }}" class="product-thumbnail__image" src="{{ item | img_url: '400x' }}">
                              </div>
                              <span class="product-thumbnail__quantity" aria-hidden="true">{{ item.quantity }}</span>
                            </div>
                          </td>
                          <th class="product__description" scope="row">
                            <span class="product__description__name order-summary__emphasis">{{ item.product.title | escape }}</span>
                            <span class="product__description__variant order-summary__small-text">{{ item.variant.title }}</span>
                          </th>
                          <td class="product__quantity visually-hidden">{{ item.quantity }}</td>
                          <td class="product__price">
                            <span class="order-summary__emphasis skeleton-while-loading">{{ item.line_price | money }}</span>
                          </td>
                        </tr>
                        {% endfor %}                       
                      </tbody>
                    </table>
                    <div class="order-summary__scroll-indicator" aria-hidden="true" tabindex="-1">
                      Desplázate para ver mas artículos
                      <svg aria-hidden="true" focusable="false" class="icon-svg icon-svg--size-12"> <use xlink:href="#down-arrow"></use> </svg>
                    </div>
                  </div>
                </div>
                <div class="order-summary__section order-summary__section--discount" data-reduction-form="update">
                  <h3 class="visually-hidden">Descuento</h3>

                  <div class="notice notice--warning default-background hide" id="invalidDiscountCode" data-banner="true" role="status" tabindex="-1" aria-atomic="true" aria-live="polite">
                    <svg class="icon-svg icon-svg--size-24 notice__icon" aria-hidden="true" focusable="false">
                      <use xlink:href="#warning">
                        <svg id="warning"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 22"><path d="M15.286 2.386l7.91 13.857C25.01 19.423 23.65 22 20.16 22H3.84C.35 22-1.01 19.427.805 16.243l7.91-13.857c1.815-3.178 4.754-3.185 6.57 0zm-1.737.992c-1.05-1.838-2.05-1.837-3.1 0L2.54 17.235C1.468 19.122 1.93 20 3.84 20h16.32c1.91 0 2.374-.88 1.298-2.765l-7.91-13.857zM12 6.5c.552 0 1 .448 1 1V12c0 .552-.448 1-1 1s-1-.448-1-1V7.5c0-.552.448-1 1-1zm-1.5 10c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5z"></path></svg></svg>
                      </use>
                    </svg>
                    <div class="notice__content">
                      <p class="notice__text">El código de descuento <strong class="discount-code"></strong> no es válido para los artículos en tu carrito de compra</p>
                    </div>
                    <button name="removeDiscount" type="button" class="notice__controls" aria-label="Eliminar descuento" data-banner-dismiss="true">
                      <svg class="icon-svg icon-svg--size-14 icon-svg--block" aria-hidden="true" focusable="false">
                        <use xlink:href="#close">
                          <svg id="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15.1 2.3L13.7.9 8 6.6 2.3.9.9 2.3 6.6 8 .9 13.7l1.4 1.4L8 9.4l5.7 5.7 1.4-1.4L9.4 8"></path></svg></svg>
                        </use>
                      </svg>
                    </button>
                  </div>

                  <div class="fieldset">
                    <div class="field">
                      <div class="field__input-btn-wrapper">
                        <div class="field__input-wrapper">
                          <label class="field__label field__label--visible" for="checkout_reduction_code">Código de descuento</label>
                          <input placeholder="Código de descuento" class="field__input" id="checkout_reduction_code" data-discount-field="true" autocomplete="off" aria-required="true" size="30" type="text" name="checkout[reduction_code]">
                        </div>
                        <button name="button-desc" type="button" class="field__input-btn btn btn--disabled" aria-busy="false" disabled="disabled" id="submit_discount_code">
                          <span class="btn__content visually-hidden-on-mobile" aria-hidden="true">
                            Usar
                          </span>
                          <span class="visually-hidden">
                            Aplicar código de descuento
                          </span>
                          <svg class="icon-svg icon-svg--size-16 btn__icon shown-on-mobile" aria-hidden="true" focusable="false"> <use xlink:href="#arrow"></use> </svg>
                          <svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg>
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="tags-list tag-discount-list"></div>
                </div>
                <div class="order-summary__section order-summary__section--total-lines" data-order-summary-section="payment-lines">
                  <table class="total-line-table">
                    <caption class="visually-hidden">Resumen de costos</caption>
                    <thead>
                      <tr>
                        <th scope="col"><span class="visually-hidden">Descripción</span></th>
                        <th scope="col"><span class="visually-hidden">Precio</span></th>
                      </tr>
                    </thead>
                    <tbody class="total-line-table__tbody">
                      <tr class="total-line total-line--subtotal">
                        <th class="total-line__name" scope="row">Subtotal</th>
                        <td class="total-line__price">
                          <span class="order-summary__emphasis skeleton-while-loading" data-checkout-subtotal-price-target="{{ cart.items_subtotal_price | times: 100 }}">
                            {{ cart.items_subtotal_price | money }}
                          </span>
                        </td>
                      </tr>
                      <tr class="total-line total-line--reduction hide" data-discount-type="">
                        <th class="total-line__name" scope="row">
                          <span>Descuento</span>
                          <span class="reduction-code">
                            <svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-18 reduction-code__icon" aria-hidden="true" focusable="false">
                              <use xlink:href="#tags-filled"></use>
                            </svg>
                            <span class="reduction-code__text"></span>
                          </span>
                        </th>
                        <td class="total-line__price">
                          <span class="order-summary__emphasis skeleton-while-loading total-line__price-s1" aria-hidden="true" data-checkout-discount-amount-target="0"></span>
                          <span class="visually-hidden skeleton-while-loading-sr total-line__price-s2"></span>
                        </td>
                      </tr>
                      <tr class="total-line total-line--shipping">
                        <th class="total-line__name" scope="row">
                          <span>Envíos</span>
                        </th>
                        <td class="total-line__price">
                          <span class="skeleton-while-loading order-summary__small-text" data-checkout-total-shipping-target="0" id="shipping_summary">
                            Calculado en el siguiente paso
                          </span>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot class="total-line-table__footer">
                      <tr class="total-line">
                        <th class="total-line__name payment-due-label" scope="row">
                          <span class="payment-due-label__total">Total</span>
                          <span class="payment-due-label__taxes order-summary__small-text hidden" data-checkout-taxes="">
                            Incluye <span data-checkout-total-taxes-target="0">0,00€</span> de impuestos
                          </span>
                        </th>
                        <td class="total-line__price payment-due" data-presentment-currency="EUR">
                          <span class="payment-due__price skeleton-while-loading--lg total-recap__calc-price" data-checkout-payment-due-target="{{ cart.total_price | times: 100 }}">
                            {{ cart.total_price | money }}
                          </span>
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </div>
                <br />
                <br />
                <br />
                <div class="button-help--whatsapp button-help--only-desktop">
                    {%- if settings.text-checkout-cont != blank -%}
                       {{ settings.text-checkout-cont }} 
                       <a href="https://api.whatsapp.com/send?phone={{ settings.number-checkout-wsp }}" target="_blank">
                          {{ settings.number-checkout-cont }}
                       </a>
                    {% endif %}
                </div>
              </div>
            </div>

            <div class="visually-hidden" data-order-summary-section="accessibility-live-region">
              <div aria-live="polite" aria-atomic="true" role="status">
                Precio total actualizado:
                <span class="total-recap__calc-price" data-checkout-payment-due-target="{{ cart.total_price | times: 100 }}">
                  {{ cart.total_price | money }}
                </span>
              </div>
            </div>
            <div id="partial-icon-symbols" class="icon-symbols" data-tg-refresh="partial-icon-symbols" data-tg-refresh-always="true"><svg xmlns="http://www.w3.org/2000/svg"><symbol id="info"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 11h1v7h-2v-5c-.552 0-1-.448-1-1s.448-1 1-1h1zm0 13C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM10.5 7.5c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5z"></path></svg></symbol>
              <symbol id="caret-down"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M0 3h10L5 8" fill-rule="nonzero"></path></svg></symbol>
              <symbol id="question"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm.7 13H6.8v-2h1.9v2zm2.6-7.1c0 1.8-1.3 2.6-2.8 2.8l-.1 1.1H7.3L7 7.5l.1-.1c1.8-.1 2.6-.6 2.6-1.6 0-.8-.6-1.3-1.6-1.3-.9 0-1.6.4-2.3 1.1L4.7 4.5c.8-.9 1.9-1.6 3.4-1.6 1.9.1 3.2 1.2 3.2 3z"></path></svg></symbol>
              <symbol id="spinner-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0v2c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8h2z"></path></svg></symbol>
              <symbol id="chevron-right"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M2 1l1-1 4 4 1 1-1 1-4 4-1-1 4-4"></path></svg></symbol>
              <symbol id="down-arrow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M10.817 7.624l-4.375 4.2c-.245.235-.64.235-.884 0l-4.375-4.2c-.244-.234-.244-.614 0-.848.245-.235.64-.235.884 0L5.375 9.95V.6c0-.332.28-.6.625-.6s.625.268.625.6v9.35l3.308-3.174c.122-.117.282-.176.442-.176.16 0 .32.06.442.176.244.234.244.614 0 .848"></path></svg></symbol>
              <symbol id="arrow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 8.1l-8.1 8.1-1.1-1.1L13 8.9H0V7.3h13L6.8 1.1 7.9 0 16 8.1z"></path></svg></symbol></svg>
            </div>
          </div>
        </aside>
      </div>
    </div>
    <form method="POST" action="#" class="hidden" id="formularioProcesoPago">
      <input type="text" name="final_chk_order_db" id="final_chk_order_db" value="0" />
      <input type="text" name="final_chk_customer_id" id="final_chk_customer_id" value="0" />
      <input type="text" name="final_chk_address_id" id="final_chk_address_id" value="0" />
      <input type="text" name="final_chk_customer_db" id="final_chk_customer_db" value="0" />
      <input type="text" name="final_chk_address_shipping_db" id="final_chk_address_shipping_db" value="0" />
      <input type="text" name="final_chk_shipping_title" id="final_chk_shipping_title" value="" />
      <input type="text" name="final_chk_shipping_price" id="final_chk_shipping_price" value="0" />
      <input type="text" name="final_chk_discount" id="final_chk_discount" value="0" />
      <input type="text" name="final_chk_discount_type" id="final_chk_discount_type" value="" />
      <input type="text" name="final_chk_discode" id="final_chk_discode" value="" />
      <input type="text" name="final_chk_disammout" id="final_chk_disammout" value="" />
      <input type="text" name="final_chk_distype" id="final_chk_distype" value="" />
    </form>
  </body>

  <script>
    function loadPepperInit(){
			const environment = 'PRD';//'TST';
			const language = 'ES';
			const currency = 'EUR';
      const configUrl = 'https://shoppink.net/api/pepper/getConfig';
      const tokenUrl = 'https://shoppink.net/api/pepper/getToken';
			const traceUrl = 'https://shoppink.net/api/pepper/sendTrace';
      PEPPER.config.init(
        `${environment}`,
        `${language}`,
        `${currency}`,
        `${configUrl}`,
        `${traceUrl}`, 
        `${tokenUrl}`
      );
    }
    $(document).ready(function(){
        console.log("Devit Web v.1.2.0");
        var urlShop                 = '{{ shop.url }}';
        var cartJSON                = {{ cart | json }};
        var formatMoney             = '{{ "0" | money }}';
        var checkout_email            = $("#checkout_email");//checkout[email]
        var buyer_accepts_marketing   = $("#checkout_buyer_accepts_marketing");//checkout[buyer_accepts_marketing]
        var shipping_address_id       = $("#checkout_shipping_address_id");//checkout[shipping_address][id]
        var first_name            = $("#checkout_shipping_address_first_name");//checkout[shipping_address][first_name]
        var last_name             = $("#checkout_shipping_address_last_name");//checkout[shipping_address][last_name]
        var company               = $("#checkout_shipping_address_company");//checkout[shipping_address][company]
        var address1              = $("#checkout_shipping_address_address1");//checkout[shipping_address][address1]
        var address2              = $("#checkout_shipping_address_address2");//checkout[shipping_address][address2]
        var city                  = $("#checkout_shipping_address_city");//checkout[shipping_address][city]
        var country               = $("#checkout_shipping_address_country");//checkout[shipping_address][country]
        var province              = $("#checkout_shipping_address_province");//checkout[shipping_address][province]
        var zip                   = $("#checkout_shipping_address_zip");//checkout[shipping_address][zip]
        var phone                 = $("#checkout_shipping_address_phone");//checkout[shipping_address][phone]
        var remember_me           = $("#checkout_remember_me");//checkout[remember_me]
        var customer_id           = $("#checkout_customer_id");//checkout[customer][id]

        var billing_address_id    = $("#checkout_billing_address_id");//checkout[billing_address][id]
        var b_first_name          = $("#checkout_billing_address_first_name");//checkout[billing_address][first_name]
        var b_last_name           = $("#checkout_billing_address_last_name");//checkout[billing_address][last_name]
        var b_company             = $("#checkout_billing_address_company");//checkout[billing_address][company]
        var b_address1            = $("#checkout_billing_address_address1");//checkout[billing_address][address1]
        var b_address2            = $("#checkout_billing_address_address2");//checkout[billing_address][address2]
        var b_city                = $("#checkout_billing_address_city");//checkout[billing_address][city]
        var b_country             = $("#checkout_billing_address_country");//checkout[billing_address][country]
        var b_province            = $("#checkout_billing_address_province");//checkout[billing_address][province]
        var b_zip                 = $("#checkout_billing_address_zip");//checkout[billing_address][zip]
        var b_phone               = $("#checkout_billing_address_phone");//checkout[billing_address][phone]

      $(document).on("click", 'button[name="removeDiscount"]', function(e){
        e.preventDefault();
        $(this).parent().addClass('hide');
        $(this).parent().find('.discount-code').html('');
      });

      $(document).on("keypress", "#checkout_reduction_code,#checkout_reduction_code_mobile", function(e){
        if (e.which == 13 || e.keyCode == 13) {
          validateDiscountCode($(this).attr("id")==="checkout_reduction_code_mobile"?"mobile":"web");
        }
      });
      $(document).on("click", "#submit_discount_code,#submit_discount_code_mobile", function(e){
        e.preventDefault();
        validateDiscountCode($(this).attr("id")==="submit_discount_code_mobile"?"mobile":"web");
      });
      $(document).on("change", 'input[name="checkout[shipping_rate][id]"]', function(e){
        let precioEnvio = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-total-shipping-cents"))/100;
        if($("#final_chk_discount_type").val()==="free_shipping"){
          precioEnvio = 0;
        }
        const precioSubtotal = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-subtotal-price-cents"))/100;
        const precioTotal = precioSubtotal + precioEnvio;
        const shippingName = $('input[name="checkout[shipping_rate][id]"]:checked').attr("data-shipping-method-label-title");
        $(".rw_checkout_shipping").html(shippingName+' · <strong class="emphasis">'+(precioEnvio===0?"Gratis":formatoMoneyShop(formatMoney, precioEnvio))+'</strong>');
        $("#shipping_summary").html(precioEnvio===0?'Gratis':formatoMoneyShop(formatMoney, precioEnvio));
        $(".total-recap__calc-price").html(formatoMoneyShop(formatMoney, precioTotal));
        $(".total-recap__calc-price--number").html(precioTotal);
        $("#final_chk_shipping_title").val($('input[name="checkout[shipping_rate][id]"]:checked').val());
        $("#final_chk_shipping_price").val(precioEnvio);
      });
      $(document).on("click", ".order-summary-toggle", function(e){
        var $button_clicked = $(this);
        if($("#order-summary").hasClass("order-summary--is-expanded")){
          //cerrar          
          $button_clicked.removeClass("order-summary-toggle--hide").addClass("order-summary-toggle--show");
          $("#order-summary").removeClass("order-summary--is-expanded").addClass("order-summary--is-collapsed");                    
        }else{
          //abrir
          $button_clicked.removeClass("order-summary-toggle--show").addClass("order-summary-toggle--hide");
          $("#order-summary").removeClass("order-summary--is-collapsed").addClass("order-summary--is-expanded");
        }
        e.preventDefault();
      });
      
      $(document).on("click", ".continue_button_steps", function(e){
        var $continueBtn = $(this);
        if($continueBtn.attr("data-processing")=="0"){
            $continueBtn.attr("data-processing", "1");
            $continueBtn.addClass("btn--loading");
            switch($continueBtn.attr("data-step")){
                case "1": abrirPasoEnvio(); break;
                case "2": abrirPasoPago(); break;
                case "3": procesarOrden(); break;
            }
        }
        e.preventDefault();
      });

      $(document).on("click", ".previous_button_steps", function(e){
        var $returnBtn = $(this);
        if($returnBtn.attr("data-processing")=="0"){
          $returnBtn.attr("data-processing", "1");
          $returnBtn.addClass("btn--loading");

          switch($returnBtn.attr("data-step")){
            case "2":
              abrirPasoInfo();
              break;
            case "3":
              abrirPasoEnvioReturn();
              break;
          }
        }
        e.preventDefault();
      });
      
      $(document).on("click", ".return_checkout_email", function(e){
        $.ajax( "/account/logout" )
        .done(function() {
          window.location.href = "/pages/custom-checkout";
        });
        return false;
        e.preventDefault();
      });

      $(document).on("click", ".return_checkout_500", function(e){
        e.preventDefault();
        window.location.href = "/pages/custom-checkout";
      });

      $(document).on("click", ".return_shipping_address", function(e){
        abrirPasoInfo();
        e.preventDefault();
      });
      
      $(document).on("change", 'input[name= "checkout[payment_gateway]"]', function(e){
        if($(this).val()=='35081683008'){
          $("#payment-gateway-subfields-35081683008").removeClass("hidden");                    
        }
        else{
          $("#payment-gateway-subfields-35081683008").addClass("hidden");          
        }
        if($(this).val()=='33641463872'){
          $("#payment-gateway-subfields-33641463872").removeClass("hidden");                    
        }
        else{          
          $("#payment-gateway-subfields-33641463872").addClass("hidden");
        }
        if($(this).val()=='35081715776'){
          $("#payment-gateway-subfields-35081715776").removeClass("hidden");                    
        }
        else{          
          $("#payment-gateway-subfields-35081715776").addClass("hidden");
        }
      });
      
      $(document).on("change", 'input[name= "checkout[different_billing_address]"]', function(e){
        if($(this).val()=='true'){
          $("#section--billing-address__different").removeClass("hidden");                    
        }
        else{
          $("#section--billing-address__different").addClass("hidden");          
        }        
      });
      
      $(document).on("keyup change", 'input[name= "checkout[reduction_code]"]', function(e){
        if($(this).val().length ==''){
          $(':button[name="button-desc"]').addClass("btn--disabled");
          $(':button[name="button-desc"]').attr('disabled', 'disabled');                             
        }
        else{           
          $(':button[name="button-desc"]').removeClass("btn--disabled"); 
          $(':button[name="button-desc"]').removeAttr("disabled");                             
        }        
      });

      $(document).on("click", ".cerrar-sesion-store", function(e){
        e.preventDefault();
        $.ajax({
            url: "/account/logout",
            type: "GET",
            data: null,
            success: function(res){
                top.location.reload();
            }
        });
      });

      $(document).on("click", ".abrir-sesion-store", function(e){
        e.preventDefault();
        top.location.href = "/account/login?checkout_url=https%3A%2F%2Fevvohome.com%2Fpages%2Fcustom-checkout";
      });

      $(document).on("click", ".remove-applied-discount", function(e){
        e.preventDefault();
        removeAppliesDiscounts();
      });

      if (!Math.round10) {
        Math.round10 = function(value, exp) {
          return decimalAdjust('round', value, exp);
        };
      }
      /**
      * Ajuste decimal de un número.
      *
      * @param {String}  tipo  El tipo de ajuste.
      * @param {Number}  valor El numero.
      * @param {Integer} exp   El exponente (el logaritmo 10 del ajuste base).
      * @returns {Number} El valor ajustado.
      */
      
      /**
      * Agrega el cupon de la app ONE + Sales Pop Ups
      *
      * @param {url_get} codigo de descuento en ruta
      */
      var currentURL = window.location.href;
      var codigo_descuentoapp = '';
      codigo_descuentoapp = currentURL.split("discount=", 2);
      console.log(codigo_descuentoapp[1]);
      if( codigo_descuentoapp[1] === undefined){
      	
      }else{
      	codigo_descuentoapp = decodeURIComponent(codigo_descuentoapp[1]);
      	$('#checkout_reduction_code').val(codigo_descuentoapp).keyup();
      	$('#submit_discount_code').click();
      }
      
      // Capturando elcupon metodo alternativo
      /*
      var discount_ruleta = JSON.parse(proof_factor_widget);
      discount_ruleta = discount_ruleta.wheel[Object.keys(discount_ruleta.wheel)[0]];
      discount_ruleta = discount_ruleta.response.value;
      discount_ruleta = encodeURIComponent(discount_ruleta);
      console.log(discount_ruleta);*/
      
      function decimalAdjust(type, value, exp) {
        // Si el exp no está definido o es cero...
        if (typeof exp === 'undefined' || +exp === 0) {
          return Math[type](value);
        }
        value = +value;
        exp = +exp;
        // Si el valor no es un número o el exp no es un entero...
        if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
          return NaN;
        }
        // Shift
        value = value.toString().split('e');
        value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
        // Shift back
        value = value.toString().split('e');
        return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
      }
      function removeAppliesDiscounts(){
        let precioEnvio = 0;
        let precioSubtotal = cartJSON.items_subtotal_price/100;
        if($('input[name="checkout[shipping_rate][id]"]:checked').length){
          precioSubtotal = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-subtotal-price-cents"))/100;
        }
        if($('input[name="checkout[shipping_rate][id]"]:checked').length){
          precioEnvio = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-total-shipping-cents"))/100;
        }
        const precioTotal = Math.round10((precioSubtotal + precioEnvio), -2);
        $("#final_chk_discount").val('');
        $("#final_chk_discount_type").val('');
        $("#final_chk_discode").val('');
        $("#final_chk_disammout").val('');
        $("#final_chk_distype").val('');
        $('.tag-discount-list').empty();
        $('.total-line--reduction').addClass('hide');
        $('.total-line--reduction .reduction-code__text').empty();
        $('.total-line--reduction .total-line__price-s1').attr("data-checkout-discount-amount-target", "0");
        $('.total-line--reduction .total-line__price-s1').empty();
        $('.total-line--reduction .total-line__price-s2').empty();
        $(".total-recap__calc-price").html(formatoMoneyShop(formatMoney, precioTotal));
        $(".total-recap__calc-price--number").html(precioTotal);
        $('.total-line--subtotal .total-line__price span').html(formatoMoneyShop(formatMoney, precioSubtotal));
        $('.product-table tbody[data-order-summary-section="line-items"] tr.product').each(function(){
          $(this).find('.product__price').html(`<span class="order-summary__emphasis skeleton-while-loading">${formatoMoneyShop(formatMoney, (parseFloat($(this).attr('data-line-price'))/100))}</span>`);
        });
      }
      function validateDiscountCode(root=""){
        removeAppliesDiscounts();
        let discountCode = "";
        let inputCode = null;
        let buttonCode = null;
        switch(root){
          case "mobile": 
            discountCode = $("#checkout_reduction_code_mobile").val().trim();
            inputCode = $("#checkout_reduction_code_mobile");
            buttonCode = $("#submit_discount_code_mobile");
            break;
          case "web": 
            discountCode = $("#checkout_reduction_code").val().trim();
            inputCode = $("#checkout_reduction_code");
            buttonCode = $("#submit_discount_code");
            break;
        }
        $("#error-for-reduction_code").parent().removeClass("field--error");
        $("#error-for-reduction_code").remove();
        $('#invalidDiscountCode').addClass('hide');
        $('#invalidDiscountCode .discount-code').html('');
        if(discountCode!==""){
          inputCode.attr("disabled", "disabled");
          buttonCode.attr("disabled", "disabled");
          buttonCode.addClass('btn--loading');
          setTimeout(function(){
            let products_ids = '';
            let variants_ids = '';
            let qties = 0;
            cartJSON.items.map(function(v){
              products_ids += (products_ids!==""?",":"")+v.product_id;
              variants_ids += (variants_ids!==""?",":"")+v.variant_id;
              qties += v.quantity;
            });

            const customer_id = $("#final_chk_customer_id").val()!=="0"?$("#final_chk_customer_id").val():$("#checkout_customer_id").val();
            const store_key = "evvostore";
            const pathDiscount = "/shopify/validateDiscount2";
            const formDiscount = {
                store_key: store_key,
                discount_code: encodeURIComponent(discountCode),
                products_ids: products_ids, 
                variants_ids: variants_ids, 
                customer_id: customer_id,
                qtys: qties, 
                subtotal: cartJSON.items_subtotal_price/100
            };
            processRequestApi(pathDiscount, formDiscount, function(_discount){
              if(_discount.discount_target){
                if(!_discount.auth){
                  $('#invalidDiscountCode .discount-code').html(discountCode);
                  $('#invalidDiscountCode').removeClass('hide');
                  $('#checkout_reduction_code').val('');
                  $('#checkout_reduction_code_mobile').val('');
                }else{
                  processDiscount(discountCode, _discount);
                }
              }else{
                buttonCode.parent().parent().addClass("field--error");
                buttonCode.parent().parent().append('<p class="field__message field__message--error" id="error-for-reduction_code" style="font-size: 0.8571428571em;">Introduce un código de descuento o tarjeta de regalo válido(a)</p>');
              }
              inputCode.removeAttr("disabled");
              buttonCode.removeAttr("disabled");
              buttonCode.removeClass('btn--loading');
            });
          }, 2000);
        }
      }

      function processDiscount(discountCode, _discount){
        console.log(_discount);
        let precioEnvio = 0;
        let precioSubtotal = cartJSON.items_subtotal_price/100;
        if($('input[name="checkout[shipping_rate][id]"]:checked').length){
          precioSubtotal = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-subtotal-price-cents"))/100;
        }
        if($('input[name="checkout[shipping_rate][id]"]:checked').length){
          precioEnvio = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-total-shipping-cents"))/100;
        }
        let discount = 0;
        let discountText = '';
        let discountType = _discount.discount_target;
        let htmlDiscount = '';
        let isBuyXGetY = null;
        switch(_discount.discount_type){
          case "percentage": 
            _discount.history.map(function(h, i){
              if(h.valid === "valid_buyxgety"){
                isBuyXGetY = i;
              }
            });
            if(isBuyXGetY){
              let variantsAdded = [];
              _discount.history[isBuyXGetY].items_discount.product_ids.map(function(p){
                if($('.product-table tr[data-product-id="'+p+'"]').length && !variantsAdded.includes(p)){
                  variantsAdded.push(p);
                  const productPrice = parseFloat($('.product-table tr[data-product-id="'+p+'"]').attr('data-line-price'))/100;
                  const line1Discount = parseFloat((productPrice * (parseFloat(_discount.discount_value)/100)).toFixed(2));
                  const newProductPrice = productPrice + line1Discount;
                  const html1Prices = `
                    <del class="order-summary__small-text skeleton-while-loading--sm">${formatoMoneyShop(formatMoney, productPrice)}</del>
                    <br>
                    <span class="order-summary__emphasis skeleton-while-loading">${newProductPrice===0?'Gratis':formatoMoneyShop(formatMoney, newProductPrice)}</span>
                  `;
                  $('.product-table tr[data-product-id="'+p+'"]').find('.product__price').html(html1Prices);
                  discount += line1Discount;
                }
              });
              _discount.history[isBuyXGetY].items_discount.variant_ids.map(function(v){
                if($('.product-table tr[data-variant-id="'+v+'"]').length && !variantsAdded.includes(v)){
                  variantsAdded.push(v);
                  const variantPrice = parseFloat($('.product-table tr[data-variant-id="'+v+'"]').attr('data-line-price'))/100;
                  const line2Discount = parseFloat((variantPrice * (parseFloat(_discount.discount_value)/100)).toFixed(2));
                  const newVariantPrice = variantPrice + line2Discount;
                  const html2Prices = `
                    <del class="order-summary__small-text skeleton-while-loading--sm">${formatoMoneyShop(formatMoney, variantPrice)}</del>
                    <br>
                    <span class="order-summary__emphasis skeleton-while-loading">${newVariantPrice===0?'Gratis':formatoMoneyShop(formatMoney, newVariantPrice)}</span>
                  `;
                  $('.product-table tr[data-product-id="'+p+'"]').find('.product__price').html(html2Prices);
                  discount += line2Discount;
                }
              });
              precioSubtotal = precioSubtotal + discount;
              $('.total-line--subtotal .total-line__price span').html(formatoMoneyShop(formatMoney, precioSubtotal));
            }else{
              if(_discount.discount_target == "line_item"){
                discount = parseFloat((precioSubtotal * (parseFloat(_discount.discount_value)/100)).toFixed(2));
                precioSubtotal = precioSubtotal + discount;
                discountText = formatoMoneyShop(formatMoney, discount);
              }
              if(_discount.discount_target == "shipping_line"){
                discount = parseFloat((precioEnvio * (parseFloat(_discount.discount_value)/100)).toFixed(2));
                precioEnvio = precioEnvio + discount;
                let shippingName = '';
                if($('input[name="checkout[shipping_rate][id]"]:checked').length){
                  shippingName = $('input[name="checkout[shipping_rate][id]"]:checked').attr("data-shipping-method-label-title");
                }
                $(".rw_checkout_shipping").html(shippingName+' · <strong class="emphasis">'+(precioEnvio===0?"Gratis":formatoMoneyShop(formatMoney, precioEnvio))+'</strong>');
                $("#shipping_summary").html(precioEnvio===0?'Gratis':formatoMoneyShop(formatMoney, precioEnvio));
                discountText = discount > 0 ? formatoMoneyShop(formatMoney, discount) : "Envío gratis";
                if(discount === 0){
                  discountType = 'free_shipping';
                }
              }
            }
            break;
          case "fixed_amount": 
            precioSubtotal = precioSubtotal + _discount.discount_value;
            discount = _discount.discount_value;
            discountText = formatoMoneyShop(formatMoney, discount);
            break;
        }
        const precioTotal = Math.round10((precioSubtotal + precioEnvio), -2);
        htmlDiscount += '<div class="tag">';
          htmlDiscount += '<div class="tag__wrapper">';
            htmlDiscount += '<span class="tag__text">';
              htmlDiscount += '<span class="reduction-code">';
                htmlDiscount += '<svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-18 reduction-code__icon" aria-hidden="true" focusable="false">';
                  htmlDiscount += '<use xlink:href="#tags-filled">';
                    htmlDiscount += '<svg id="tags-filled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path></svg></svg>';
                  htmlDiscount += '</use>';
                htmlDiscount += '</svg>';
                htmlDiscount += '<span class="reduction-code__text">'+(discountCode.toUpperCase())+'</span>';
              htmlDiscount += '</span>';
            htmlDiscount += '</span>';
            htmlDiscount += '<button type="button" class="tag__button remove-applied-discount">';
              htmlDiscount += '<svg class="icon-svg icon-svg--color-adaptive-dark icon-svg--size-12 icon-svg--block" aria-hidden="true" focusable="false">';
                htmlDiscount += '<use xlink:href="#remove">';
                  htmlDiscount += '<svg id="remove"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M1.5 1.5l10.05 10.05M11.5 1.5L1.45 11.55" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round"></path></svg></svg>';
                htmlDiscount += '</use>';
              htmlDiscount += '</svg>';
              htmlDiscount += '<span class="visually-hidden">Eliminar descuento</span>';
            htmlDiscount += '</button>';
          htmlDiscount += '</div>';
        htmlDiscount += '</div>';

        $('#checkout_reduction_code').val('');
        $('#checkout_reduction_code_mobile').val('');
        $("#final_chk_discount").val(discount*-1);
        $("#final_chk_discount_type").val(discountType);
        $("#final_chk_discode").val(discountCode.toUpperCase());
        $("#final_chk_disammout").val(_discount.discount_value * -1);
        $("#final_chk_distype").val(_discount.discount_type);
        $('.tag-discount-list').html(htmlDiscount);
        if(!isBuyXGetY){
          $('.total-line--reduction').removeClass('hide');
          $('.total-line--reduction .reduction-code__text').html(discountCode.toUpperCase());
          $('.total-line--reduction .total-line__price-s1').attr("data-checkout-discount-amount-target", discount*-100);
          $('.total-line--reduction .total-line__price-s1').html(discountText);
          $('.total-line--reduction .total-line__price-s2').html(discountText+' fueron reducidos del precio total');
        }
        $(".total-recap__calc-price").html(formatoMoneyShop(formatMoney, precioTotal));
        $(".total-recap__calc-price--number").html(precioTotal);
      }

      function abrirPasoInfo(){
        $breadcrumb = $("#breadcrumbCheckout > li");

        setTimeout(function(){
          $("#dataStep_1").removeClass("hidden");
          $("#dataStep_2").addClass("hidden");
          $("#dataStep_3").addClass("hidden");      

          $(".continue_button_steps").removeClass("btn--loading").attr("data-processing", "0");
          $(".previous_button_steps").removeClass("btn--loading").attr("data-processing", "0");

          $($breadcrumb[1]).addClass("breadcrumb__item--current");
          $($breadcrumb[2]).removeClass("breadcrumb__item--current");
          $($breadcrumb[2]).removeClass("breadcrumb__item--blank");
          $($breadcrumb[3]).removeClass("breadcrumb__item--current");
          $($breadcrumb[3]).removeClass("breadcrumb__item--blank");
        }, 1000);
      }

      function abrirPasoEnvio(){
          $breadcrumb = $("#breadcrumbCheckout > li");
          var validacion = validarFormularioInfo();
          setTimeout(function(){
              if(validacion){
                  const store_key = "evvostore";
                  const province_alt = JSON.parse($("option:selected", province).attr("data-alternate-values"));
                  const province_ = province_alt[province_alt.length-1];
                  const country_ = $("option:selected", country).attr("data-code");
                  const pathCustomer = "/shopify/createCustomer";
                  const formCustomer = {
                      store_key: store_key,
                      customer_id: customer_id.val(),
                      email: checkout_email.val(),
                      buyer_accepts_marketing: (buyer_accepts_marketing.is(":checked")?"1":"0"),
                      remember_me: (remember_me.is(":checked")?"1":"0"),
                      shipping_address_id: shipping_address_id.val(),
                      first_name: first_name.val(),
                      last_name: last_name.val(),
                      company: company.val(),
                      address1: address1.val(),
                      address2: address2.val(),
                      city: city.val(),
                      province: province_,
                      country: country.val(),
                      province_code: province.val(),
                      country_code: country_,
                      zip: zip.val(),
                      phone: phone.val()
                  };
                  processRequestApi(pathCustomer, formCustomer, function(_customer){
                      if(_customer.errors){
                        if(_customer.errors.email){
                          $('#checkout_email').parent().parent().addClass("field--error");
                          $('#checkout_email').parent().parent().append('<p class="field__message field__message--error">Tu correo es incorrecto o contiene un dominio inválido</p>');
                          $('#checkout_email').focus();
                        }else if(_customer.errors.zip){
                          $('#checkout_shipping_address_zip').parent().parent().addClass("field--error");
                          $('#checkout_shipping_address_zip').parent().parent().append('<p class="field__message field__message--error">Por favor ingrese un zip válido</p>');
                          $('#checkout_shipping_address_zip').focus();
                        }else{
                          $('#checkout_email').parent().parent().addClass("field--error");
                          $('#checkout_email').parent().parent().append('<p class="field__message field__message--error">No pudimos procesar tu pedido por favor contacta a soporte o vuelve a intentar en unos minutos</p>');
                          $('#checkout_email').focus();
                          console.log(_customer);
                        }
                        $('.continue_button_steps').attr("data-processing", "0");
                        $('.continue_button_steps').removeClass("btn--loading");
                        return false;
                      }
                      if(!_customer.response.address_id || !_customer.response.address_db){
                        console.log(_customer);
                        $('#checkout_email').parent().parent().addClass("field--error");
                        $('#checkout_email').parent().parent().append('<p class="field__message field__message--error">No se ha podido guardar correctamente la dirección, recomendamos iniciar sesión</p>');
                        $('.continue_button_steps').attr("data-processing", "0");
                        $('.continue_button_steps').removeClass("btn--loading");
                        $('#checkout_email').focus();
                        return false;
                      }
                      if(!_customer.response.customer_id || !_customer.response.customer_db){
                        console.log(_customer);
                        $('#checkout_email').parent().parent().addClass("field--error");
                        $('#checkout_email').parent().parent().append('<p class="field__message field__message--error">No se ha podido obtener correctamente la cuenta, recomendamos iniciar sesión</p>');
                        $('.continue_button_steps').attr("data-processing", "0");
                        $('.continue_button_steps').removeClass("btn--loading");
                        $('#checkout_email').focus();
                        return false;
                      }
                      var shippingAddress = {};
                      shippingAddress.zip = zip.val();
                      shippingAddress.country = country.val();
                      shippingAddress.province = province.val();
                      processRequestShipping(shippingAddress, function(_shipping){
                        const _rules = _shipping.shipping_rates;
                        let htmlShippingBlock = '';
                        let totalPrice = '{{ cart.total_price | money }}';
                        let totalPriceCents = '{{ cart.total_price }}';
                        let subtotalPrice = '{{ cart.items_subtotal_price | money }}';
                        let subtotalPriceCents = '{{ cart.items_subtotal_price }}';
                        let subtotalPriceNum = cartJSON.items_subtotal_price/100;
                        let firstCheckbox = true;
                        _rules.map(function(r, i){
                          if(i>0)
                            firstCheckbox = false;
                          
                          let shippingPrice_cents = r.price.replace(".","");
                          let shippingPrice_text = r.price==="0.00"?"Gratis":(r.price+"€");
                          htmlShippingBlock += '<div class="content-box__row">';
                              htmlShippingBlock += '<div class="radio-wrapper">';
                                  htmlShippingBlock += '<div class="radio__input">';
                                      htmlShippingBlock += '<input class="input-radio"';
                                      htmlShippingBlock += ' data-checkout-total-shipping="'+shippingPrice_text+'"';
                                      htmlShippingBlock += ' data-checkout-total-shipping-cents="'+shippingPrice_cents+'"';
                                      htmlShippingBlock += ' data-checkout-shipping-rate="Gratis"';
                                      htmlShippingBlock += ' data-checkout-original-shipping-rate="Gratis"';
                                      htmlShippingBlock += ' data-checkout-total-taxes="0.00€"';
                                      htmlShippingBlock += ' data-checkout-total-taxes-cents="0"';
                                      htmlShippingBlock += ' data-checkout-total-price="'+totalPrice+'"';
                                      htmlShippingBlock += ' data-checkout-total-price-cents="'+totalPriceCents+'"';
                                      htmlShippingBlock += ' data-checkout-payment-due="0.00€"';
                                      htmlShippingBlock += ' data-checkout-payment-due-cents="0"';
                                      htmlShippingBlock += ' data-checkout-subtotal-price="'+subtotalPrice+'"';
                                      htmlShippingBlock += ' data-checkout-subtotal-price-cents="'+subtotalPriceCents+'"';
                                      htmlShippingBlock += ' data-shipping-method-label-title="'+r.code+'"';
                                      htmlShippingBlock += ' type="radio"';
                                      htmlShippingBlock += ' value="'+r.source+'-'+handleize(r.code)+'-'+r.price+'"';
                                      htmlShippingBlock += ' name="checkout[shipping_rate][id]"';
                                      htmlShippingBlock += ' id="checkout_shipping_rate_id_'+handleize(r.code)+'-'+(r.price.replace('.','_'))+'"';
                                      htmlShippingBlock += (firstCheckbox)?' checked="checked"':'';
                                      htmlShippingBlock += ' />';
                                  htmlShippingBlock += '</div>';
                                  htmlShippingBlock += '<label class="radio__label" aria-hidden="true"';
                                  htmlShippingBlock += ' for="checkout_shipping_rate_id_'+handleize(r.code)+'-'+(r.price.replace('.','_'))+'">';
                                      htmlShippingBlock += '<span class="radio__label__primary"';
                                      htmlShippingBlock += ' data-shipping-method-label-title="'+r.code+'">';
                                          htmlShippingBlock += r.code;
                                      htmlShippingBlock += '</span>';
                                      htmlShippingBlock += '<span class="radio__label__accessory">';
                                          htmlShippingBlock += '<span class="content-box__emphasis">';
                                              htmlShippingBlock += shippingPrice_text;
                                          htmlShippingBlock += '</span>';
                                      htmlShippingBlock += '</span>';
                                  htmlShippingBlock += '</label>';
                              htmlShippingBlock += '</div><!-- /radio-wrapper-->';
                          htmlShippingBlock += '</div>';
                        });
                        $("#dataShippingBlock").html(htmlShippingBlock);
                        $("#dataStep_1").addClass("hidden");
                        $("#dataStep_2").removeClass("hidden");
                        $("#dataStep_3").addClass("hidden");
                        $($breadcrumb[1]).removeClass("breadcrumb__item--current");
                        $($breadcrumb[1]).removeClass("breadcrumb__item--blank");
                        $($breadcrumb[2]).addClass("breadcrumb__item--current");
                        $($breadcrumb[3]).removeClass("breadcrumb__item--current");
                        $($breadcrumb[3]).removeClass("breadcrumb__item--blank");

                        var rw_address = "";
                        rw_address += company.val();
                        rw_address += (rw_address!==""?", ":"")+address1.val();
                        rw_address += (address2.val()!==""?(", "+address2.val()):"");
                        rw_address += ", "+zip.val();
                        rw_address += " "+city.val();
                        rw_address += " "+$("option:selected", province).text();
                        rw_address += ", "+$("option:selected", country).text();

                        $(".rw_checkout_email").html(checkout_email.val());
                        $(".rw_address1").html(rw_address);
                        $("#final_chk_customer_id").val(_customer.response.customer_id);
                        $("#final_chk_address_id").val(_customer.response.address_id);
                        $("#final_chk_customer_db").val(_customer.response.customer_db);
                        $("#final_chk_address_shipping_db").val(_customer.response.address_db);
                      });
                  });
              }else{
                  $('.continue_button_steps').attr("data-processing", "0");
                  $('.continue_button_steps').removeClass("btn--loading");
              }
          }, 1000);
      }
      
      function abrirPasoEnvioReturn(){
        $breadcrumb = $("#breadcrumbCheckout > li");        
        setTimeout(function(){
          $("#dataStep_1").addClass("hidden");
          $("#dataStep_2").removeClass("hidden");
          $("#dataStep_3").addClass("hidden");

          $($breadcrumb[1]).removeClass("breadcrumb__item--current");
          $($breadcrumb[1]).removeClass("breadcrumb__item--blank");
          $($breadcrumb[2]).addClass("breadcrumb__item--current");
          $($breadcrumb[3]).removeClass("breadcrumb__item--current");
          $($breadcrumb[3]).removeClass("breadcrumb__item--blank");

          $(".continue_button_steps").removeClass("btn--loading").attr("data-processing", "0");
          $(".previous_button_steps").removeClass("btn--loading").attr("data-processing", "0");
        }, 1000);
      }
      
      function procesarOrden(){
        var validacion = validarFormularioPago();
        setTimeout(function(){
          if(validacion){
            var final_chk_customer_id = $("#final_chk_customer_id").val();
            var final_chk_address_id = $("#final_chk_address_id").val();
            var final_chk_shipping_title = $("#final_chk_shipping_title").val();
            var final_chk_shipping_price = $("#final_chk_shipping_price").val();
            var final_chk_order_db = $("#final_chk_order_db").val();
            var different_bill = $('input[name="checkout[different_billing_address]"]').val();

            //if(different_bill === 'true'){
            billing_address_id.val($("#checkout_shipping_address_id").val());
            b_first_name.val(first_name.val());
            b_last_name.val(last_name.val());
            b_company.val(company.val());
            b_address1.val(address1.val());
            b_address2.val(address2.val());
            b_city.val(city.val());
            b_province.val(province.val());
            b_zip.val(zip.val());
            b_phone.val(phone.val());
            //}

            const taxPer = 0.21;
            const isTaxApplicable = true;
            let precioEnvio = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-total-shipping-cents"))/100;
            if($("#final_chk_discount_type").val()==="free_shipping"){
              precioEnvio = 0;
            }
            const precioSubtotal = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-subtotal-price-cents"))/100;
            const precioDiscount = parseFloat($("#final_chk_discount").val());
            const precioTotal = precioSubtotal + precioEnvio - precioDiscount;
            const shippingName = $('input[name="checkout[shipping_rate][id]"]:checked').attr("data-shipping-method-label-title");
            let formattedItems = [];
            cartJSON.items.map(function(v){
              formattedItems.push({
                product_title: v.product_title, 
                product_id: v.product_id, 
                variant_id: v.variant_id,
                sku: v.sku,
                variant_title: v.variant_title,
                product_type: v.product_type,
                quantity: v.quantity, 
                price: (v.price/100), 
                line_price: (v.line_price/100)
              });
            });
            const cartFormatted = {
              subtotal: precioSubtotal, 
              shipping: precioEnvio,
              shipping_title: shippingName, 
              total: parseFloat(precioTotal.toFixed(2)),
              discount: precioDiscount,
              discode: $("#final_chk_discode").val(),
              disammout: $("#final_chk_disammout").val(), 
              distype: $("#final_chk_distype").val(),
              discount_type: $("#final_chk_discount_type").val(),
              tax: 0,
              rate: taxPer,
              title_rate: 'ES VAT',
              note: cartJSON.note,
              items: formattedItems
            };
            if(isTaxApplicable){
              //cartFormatted.tax = parseFloat(((precioTotal / (1+taxPer))*taxPer).toFixed(2));
              cartFormatted.tax = parseFloat( decimalAdjust('floor', ((precioTotal / (1+taxPer))*taxPer), -2) );
            }

            const store_key = "evvostore";
            const province_alt = JSON.parse($("option:selected", b_province).attr("data-alternate-values"));
            const province_ = province_alt[province_alt.length-1];
            const country_ = $("option:selected", b_country).attr("data-code");
            const pathOrder = "/pepper/createOrder";
            const formOrder = {
                store_key: store_key,
                pepper_token: PEPPER.config.session.access_token,
                pepper_term: ($("#lblTermPepper strong").length ? $("#lblTermPepper strong").text() : 3),
                final_chk_order_db: $("#final_chk_order_db").val(),
                final_chk_customer_id: $("#final_chk_customer_id").val(),
                final_chk_address_id: $("#final_chk_address_id").val(),
                final_chk_customer_db: $("#final_chk_customer_db").val(),
                final_chk_address_shipping_db: $("#final_chk_address_shipping_db").val(),
                final_chk_shipping_title: $("#final_chk_shipping_title").val(),
                final_chk_shipping_price: $("#final_chk_shipping_price").val(),
                b_first_name: b_first_name.val(),
                b_last_name: b_last_name.val(),
                b_company: b_company.val(),
                b_address1: b_address1.val(),
                b_address2: b_address2.val(),
                b_city: b_city.val(),
                b_province: province_,
                b_country: b_country.val(),
                b_province_code: province.val(),
                b_country_code: country_,
                b_zip: b_zip.val(),
                b_phone: b_phone.val(), 
                cart_json: JSON.stringify(cartFormatted)
            };
            processRequestApi(pathOrder, formOrder, function(_order){
              console.log(_order);
              if(_order.result.http_code === "401"){
                PEPPER.config.refreshToken(function(){
                  formOrder.pepper_token = PEPPER.config.session.access_token;
                  processRequestApi(pathOrder, formOrder, function(_order){
                    if(_order.data){
                      top.location.href = _order.data.url;
                    }
                  });
                });
              }else{
                if(_order.data){
                  top.location.href = _order.data.url;
                }
              }
            });

          }else{
            $(".continue_button_steps").removeClass("btn--loading").attr("data-processing", "0");
            $(".previous_button_steps").removeClass("btn--loading").attr("data-processing", "0");
          }
        }, 1000);
      }

      function validarFormularioPago(){
        $(".field__message--error").remove();
        $(".field--error").removeClass("field--error");

        var errors = 0;
        var payment_gateway = $('input[name="checkout[payment_gateway]"]');
        if(!payment_gateway.is(":checked")){
          errors++;
        }

        return errors===0 ? true:false;
      }

      function abrirPasoPago(next=true){
        const taxPer = 0.21;
        const isTaxApplicable = true;
        $breadcrumb = $("#breadcrumbCheckout > li");
        var validacion = validarFormularioEnvio();
        setTimeout(function(){
          if(validacion){
            let precioEnvio = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-total-shipping-cents"))/100;
            if($("#final_chk_discount_type").val()==="free_shipping"){
              precioEnvio = 0;
            }
            const precioSubtotal = parseInt($('input[name="checkout[shipping_rate][id]"]:checked').attr("data-checkout-subtotal-price-cents"))/100;
            const precioDiscount = parseFloat($("#final_chk_discount").val());
            const precioTotal = precioSubtotal + precioEnvio - precioDiscount;
            const shippingName = $('input[name="checkout[shipping_rate][id]"]:checked').attr("data-shipping-method-label-title");
            let formattedItems = [];
            cartJSON.items.map(function(v){
              formattedItems.push({
                product_title: v.product_title, 
                product_id: v.product_id, 
                variant_id: v.variant_id,
                sku: v.sku,
                variant_title: v.variant_title,
                product_type: v.product_type,
                quantity: v.quantity, 
                price: (v.price/100), 
                line_price: (v.line_price/100)
              });
            });
            const cartFormatted = {
              subtotal: precioSubtotal, 
              shipping: precioEnvio,
              shipping_title: shippingName, 
              total: parseFloat(precioTotal.toFixed(2)),
              discount: precioDiscount,
              discode: $("#final_chk_discode").val(),
              disammout: $("#final_chk_disammout").val(), 
              distype: $("#final_chk_distype").val(),
              discount_type: $("#final_chk_discount_type").val(),
              tax: 0,
              rate: taxPer,
              title_rate: 'ES VAT',
              note: cartJSON.note,
              items: formattedItems
            };
            if(isTaxApplicable){
              cartFormatted.tax = parseFloat( decimalAdjust('floor', ((precioTotal / (1+taxPer))*taxPer), -2) );
              if(cartFormatted.tax > 0){
                $('.payment-due-label__taxes').find('[data-checkout-total-taxes-target]').html(cartFormatted.tax+'€');
                $('.payment-due-label__taxes').find('[data-checkout-total-taxes-target]').attr("data-checkout-total-taxes-target", cartFormatted.tax);
                $('.payment-due-label__taxes').removeClass("hidden");
              }
            }
            const store_key = "evvostore";
            const pathOrder = "/shopify/prepareOrderDB";
            const formOrder = {
              store_key: store_key,
              cart_json: JSON.stringify(cartFormatted),
              customer_db: parseInt($("#final_chk_customer_db").val()),
              address_shipping_db: parseInt($("#final_chk_address_shipping_db").val())
            };
            processRequestApi(pathOrder, formOrder, function(_order){
                $("#dataStep_1").addClass("hidden");
                $("#dataStep_2").addClass("hidden");
                $("#dataStep_3").removeClass("hidden");
                $($breadcrumb[1]).removeClass("breadcrumb__item--current");
                $($breadcrumb[1]).removeClass("breadcrumb__item--blank");
                $($breadcrumb[2]).removeClass("breadcrumb__item--current");
                $($breadcrumb[2]).removeClass("breadcrumb__item--blank");
                $($breadcrumb[3]).addClass("breadcrumb__item--current");
                if(next) $($breadcrumb[2]).addClass("breadcrumb__item--completed");

                $(".rw_checkout_shipping").html(shippingName+' · <strong class="emphasis">'+(precioEnvio===0?"Gratis":formatoMoneyShop(formatMoney, precioEnvio))+'</strong>');
                $("#shipping_summary").html(precioEnvio===0?'Gratis':formatoMoneyShop(formatMoney, precioEnvio));
                $(".total-recap__calc-price").html(formatoMoneyShop(formatMoney, precioTotal));
                $(".total-recap__calc-price--number").html(precioTotal);
                $("#final_chk_shipping_title").val($('input[name="checkout[shipping_rate][id]"]:checked').val());
                $("#final_chk_shipping_price").val(precioEnvio);
                $("#final_chk_order_db").val(_order.response.order_db);

                loadPepperInit();
              }
            );
            
          }
        }, 1000);
      }
      
      function validarFormularioInfo(){
        $(".field__message--error").remove();
        $(".field--error").removeClass("field--error");

        var errors = 0;

        if(checkout_email.val() === "" || !emailValido(checkout_email.val())){
          checkout_email.parent().parent().addClass("field--error");
          checkout_email.parent().parent().append('<p class="field__message field__message--error">Introduce un correo electrónico válido</p>');
          errors++;
        }
        if(last_name.val() === ""){
          last_name.parent().parent().addClass("field--error");
          last_name.parent().parent().append('<p class="field__message field__message--error">Introduce un apellido</p>');
          errors++;
        }
        if(address1.val() === ""){
          address1.parent().parent().addClass("field--error");
          address1.parent().parent().append('<p class="field__message field__message--error">Introduce una dirección</p>');
          errors++;
        }
        if(address2.val() === ""){
            address2.parent().parent().addClass("field--error");
            address2.parent().parent().append('<p class="field__message field__message--error">Introduce un DNI/CIF</p>');
            errors++;
        }
        if(city.val() === ""){
          city.parent().parent().addClass("field--error");
          city.parent().parent().append('<p class="field__message field__message--error">Introduce la ciudad</p>');
          errors++;
        }
        if(country.val() === ""){
          country.parent().parent().addClass("field--error");
          country.parent().parent().append('<p class="field__message field__message--error">Selecciona un país</p>');
          errors++;
        }
        if(province.val() === ""){
          province.parent().parent().addClass("field--error");
          province.parent().parent().append('<p class="field__message field__message--error">Selecciona un estado</p>');
          errors++;
        }
        if(zip.val() === ""){
          zip.parent().parent().addClass("field--error");
          zip.parent().parent().append('<p class="field__message field__message--error">Introduce la zona o código postal</p>');
          errors++;
        }
        if(phone.val() === "" || !telefonoValido(phone.val())){
          phone.parent().parent().addClass("field--error");
          phone.parent().parent().append('<p class="field__message field__message--error">Introduce un número de teléfono válido</p>');
          errors++;
        }
        return errors===0 ? true:false;
      }
      function validarFormularioEnvio(){
        var errors = 0;
        var chkEnvio = $('input[name="checkout[shipping_rate][id]"]');
        if(!chkEnvio.is(":checked")){
          errors++;
        }
        return errors===0 ? true:false;
      }
      function decimalAdjust(type, value, exp) {
        // Si el exp no está definido o es cero...
        if (typeof exp === 'undefined' || +exp === 0) {
          return Math[type](value);
        }
        value = +value;
        exp = +exp;
        // Si el valor no es un número o el exp no es un entero...
        if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
          return NaN;
        }
        // Shift
        value = value.toString().split('e');
        value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
        // Shift back
        value = value.toString().split('e');
        return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
      }
      function emailValido(valueText){
        var regex = /[\w-\.]{2,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/;
        return regex.test(valueText.trim())?true:false;
      }
      function telefonoValido(valueText){
        var regex1 = /\x2b([0-9]+){9}$/;
        var regex2 = /([0-9]+){9}$/;
        var regex3 = /\s/;

        var valid = false;
        if(!regex3.test(valueText.trim()) && (regex1.test(valueText.trim()) || regex2.test(valueText.trim())))
            valid = true;

        return valid;
      }
      function handleize(str){
        str = str.toLowerCase();
        var toReplace = ['"', "'", "\\", "(", ")", "[", "]"];
        // For the old browsers
        for (var i = 0; i < toReplace.length; ++i) {
            str = str.replace(toReplace[i], "");
        }
        str = str.replace(/\W+/g, "-");
        if (str.charAt(str.length - 1) == "-") {
            str = str.replace(/-+\z/, "");
        }
        if (str.charAt(0) == "-") {
            str = str.replace(/\A-+/, "");
        }
        return str;
      }
      function formatoMoneyShop(formatMoney, strNum){
        return formatMoney.replace((formatMoney.includes(".")?"0.00":"0,00"), parseFloat(strNum).toFixed(2));
      }
      function processRequestShipping(shippingAddress, callback){
        var params = {
          type: 'GET',
          url: '/cart/shipping_rates.json',
          data: jQuery.param({'shipping_address': shippingAddress}),
          dataType: 'json',
          success: function(response) {
            if(typeof callback === "function")
              callback(response);
          },
          error: function(XMLHttpRequest, textStatus) {
            console.log(XMLHttpRequest);
            console.log(textStatus);
            alert("Ha ocurrido un error en el proceso, la página se recargará");
            top.location.reload();
          }
        };
        $.ajax(params);
      }
      function processRequestApi(path, dataForm, callback){
        const urlApi = "https://shoppink.net/api";
        $.ajax({
            type: 'GET',
            url: urlApi+path,
            data: dataForm,
            async: false,
            jsonpCallback: 'jsonp_callback',
            contentType: "application/json",
            dataType: 'jsonp',
            cache: false,
            success: function(data) {
                if(typeof callback === "function")
                    callback(data);
            }
        });
      }
    });
  </script>
</html>